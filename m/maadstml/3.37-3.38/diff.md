# Comparing `tmp/maadstml-3.37.tar.gz` & `tmp/maadstml-3.38.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "maadstml-3.37.tar", last modified: Mon Jun 19 23:47:42 2023, max compression
+gzip compressed data, was "maadstml-3.38.tar", last modified: Wed Jun 21 14:24:19 2023, max compression
```

## Comparing `maadstml-3.37.tar` & `maadstml-3.38.tar`

### file list

```diff
@@ -1,19 +1,19 @@
-drwxrwxrwx   0        0        0        0 2023-06-19 23:47:41.997992 maadstml-3.37/
--rw-rw-rw-   0        0        0      852 2020-02-09 18:05:54.000000 maadstml-3.37/LICENSE.txt
--rw-rw-rw-   0        0        0       65 2021-01-25 23:03:44.000000 maadstml-3.37/MANIFEST.in
--rw-rw-rw-   0        0        0   174408 2023-06-19 23:47:41.997992 maadstml-3.37/PKG-INFO
--rw-rw-rw-   0        0        0   173811 2023-06-13 18:28:52.000000 maadstml-3.37/README.md
-drwxrwxrwx   0        0        0        0 2023-06-19 23:47:41.984117 maadstml-3.37/maadstml/
--rw-rw-rw-   0        0        0     2387 2023-06-13 18:19:41.000000 maadstml-3.37/maadstml/__init__.py
--rw-rw-rw-   0        0        0     4871 2023-06-10 19:44:05.000000 maadstml-3.37/maadstml/readpdf.py
--rw-rw-rw-   0        0        0    81649 2023-06-13 19:45:36.000000 maadstml-3.37/maadstml/sendfiles.py
--rw-rw-rw-   0        0        0    10850 2023-06-10 19:08:28.000000 maadstml-3.37/maadstml/tmltextsummary.py
-drwxrwxrwx   0        0        0        0 2023-06-19 23:47:41.997992 maadstml-3.37/maadstml.egg-info/
--rw-rw-rw-   0        0        0   174408 2023-06-19 23:47:41.000000 maadstml-3.37/maadstml.egg-info/PKG-INFO
--rw-rw-rw-   0        0        0      320 2023-06-19 23:47:41.000000 maadstml-3.37/maadstml.egg-info/SOURCES.txt
--rw-rw-rw-   0        0        0        1 2023-06-19 23:47:41.000000 maadstml-3.37/maadstml.egg-info/dependency_links.txt
--rw-rw-rw-   0        0        0      223 2023-06-19 23:47:41.000000 maadstml-3.37/maadstml.egg-info/requires.txt
--rw-rw-rw-   0        0        0        9 2023-06-19 23:47:41.000000 maadstml-3.37/maadstml.egg-info/top_level.txt
--rw-rw-rw-   0        0        0      239 2023-06-19 23:47:07.000000 maadstml-3.37/requirements.txt
--rw-rw-rw-   0        0        0       42 2023-06-19 23:47:41.997992 maadstml-3.37/setup.cfg
--rw-rw-rw-   0        0        0     1088 2023-06-19 23:47:36.000000 maadstml-3.37/setup.py
+drwxrwxrwx   0        0        0        0 2023-06-21 14:24:19.130799 maadstml-3.38/
+-rw-rw-rw-   0        0        0      852 2020-02-09 18:05:54.000000 maadstml-3.38/LICENSE.txt
+-rw-rw-rw-   0        0        0       65 2021-01-25 23:03:44.000000 maadstml-3.38/MANIFEST.in
+-rw-rw-rw-   0        0        0   174408 2023-06-21 14:24:19.130799 maadstml-3.38/PKG-INFO
+-rw-rw-rw-   0        0        0   173811 2023-06-13 18:28:52.000000 maadstml-3.38/README.md
+drwxrwxrwx   0        0        0        0 2023-06-21 14:24:19.113787 maadstml-3.38/maadstml/
+-rw-rw-rw-   0        0        0     2387 2023-06-13 18:19:41.000000 maadstml-3.38/maadstml/__init__.py
+-rw-rw-rw-   0        0        0     4871 2023-06-10 19:44:05.000000 maadstml-3.38/maadstml/readpdf.py
+-rw-rw-rw-   0        0        0    82738 2023-06-21 14:23:08.000000 maadstml-3.38/maadstml/sendfiles.py
+-rw-rw-rw-   0        0        0    10850 2023-06-10 19:08:28.000000 maadstml-3.38/maadstml/tmltextsummary.py
+drwxrwxrwx   0        0        0        0 2023-06-21 14:24:19.130799 maadstml-3.38/maadstml.egg-info/
+-rw-rw-rw-   0        0        0   174408 2023-06-21 14:24:18.000000 maadstml-3.38/maadstml.egg-info/PKG-INFO
+-rw-rw-rw-   0        0        0      320 2023-06-21 14:24:19.000000 maadstml-3.38/maadstml.egg-info/SOURCES.txt
+-rw-rw-rw-   0        0        0        1 2023-06-21 14:24:18.000000 maadstml-3.38/maadstml.egg-info/dependency_links.txt
+-rw-rw-rw-   0        0        0      223 2023-06-21 14:24:18.000000 maadstml-3.38/maadstml.egg-info/requires.txt
+-rw-rw-rw-   0        0        0        9 2023-06-21 14:24:18.000000 maadstml-3.38/maadstml.egg-info/top_level.txt
+-rw-rw-rw-   0        0        0      239 2023-06-19 23:47:07.000000 maadstml-3.38/requirements.txt
+-rw-rw-rw-   0        0        0       42 2023-06-21 14:24:19.130799 maadstml-3.38/setup.cfg
+-rw-rw-rw-   0        0        0     1088 2023-06-21 14:13:03.000000 maadstml-3.38/setup.py
```

### Comparing `maadstml-3.37/LICENSE.txt` & `maadstml-3.38/LICENSE.txt`

 * *Files identical despite different names*

### Comparing `maadstml-3.37/PKG-INFO` & `maadstml-3.38/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: maadstml
-Version: 3.37
+Version: 3.38
 Summary: Multi-Agent Accelerator for Data Science (MAADS): Transactional Machine Learning
 Home-page: https://github.com/smaurice101/transactionalmachinelearning
 Author: Sebastian Maurice
 Author-email: sebastian.maurice@otics.ca
 License: MIT License
 Keywords: multi-agent, transactional machine learning, data streams, data science, optimization, prescriptive analytics, machine learning, automl,auto-ml,artificial intelligence,predictive analytics,advanced analytics
 Description-Content-Type: text/markdown
```

### Comparing `maadstml-3.37/README.md` & `maadstml-3.38/README.md`

 * *Files identical despite different names*

### Comparing `maadstml-3.37/maadstml/__init__.py` & `maadstml-3.38/maadstml/__init__.py`

 * *Files identical despite different names*

### Comparing `maadstml-3.37/maadstml/readpdf.py` & `maadstml-3.38/maadstml/readpdf.py`

 * *Files identical despite different names*

### Comparing `maadstml-3.37/maadstml/sendfiles.py` & `maadstml-3.38/maadstml/sendfiles.py`

 * *Files 1% similar despite different names*

```diff
@@ -4405,700 +4405,768 @@
 00011340: 6e67 732e 6669 6c74 6572 7761 726e 696e  ngs.filterwarnin
 00011350: 6773 2822 6967 6e6f 7265 2229 0d0a 0d0a  gs("ignore")....
 00011360: 236e 6c74 6b2e 646f 776e 6c6f 6164 2827  #nltk.download('
 00011370: 7374 6f70 776f 7264 7327 290d 0a0d 0a64  stopwords')....d
 00011380: 6566 2067 6574 5f73 746f 705f 776f 7264  ef get_stop_word
 00011390: 7328 293a 0d0a 2020 2020 2222 226c 6f61  s():..    """loa
 000113a0: 6420 7374 6f70 2077 6f72 6473 2022 2222  d stop words """
-000113b0: 0d0a 2020 2020 7265 7475 726e 2073 746f  ..    return sto
-000113c0: 7077 6f72 6473 2e77 6f72 6473 2827 656e  pwords.words('en
-000113d0: 676c 6973 6827 290d 0a20 2020 200d 0a23  glish')..    ..#
-000113e0: 2320 2020 2077 6974 6820 6f70 656e 2827  #    with open('
-000113f0: 7374 6f70 776f 7264 732e 7478 7427 2c20  stopwords.txt', 
-00011400: 2772 272c 2065 6e63 6f64 696e 673d 2275  'r', encoding="u
-00011410: 7466 2d38 2229 2061 7320 663a 0d0a 2323  tf-8") as f:..##
-00011420: 2020 2020 2020 2020 7374 6f70 776f 7264          stopword
-00011430: 7320 3d20 662e 7265 6164 6c69 6e65 7328  s = f.readlines(
-00011440: 290d 0a23 2320 2020 2020 2020 2073 746f  )..##        sto
-00011450: 705f 7365 7420 3d20 7365 7428 6d2e 7374  p_set = set(m.st
-00011460: 7269 7028 2920 666f 7220 6d20 696e 2073  rip() for m in s
-00011470: 746f 7077 6f72 6473 290d 0a23 2320 2020  topwords)..##   
-00011480: 2020 2023 2020 7072 696e 7428 6672 6f7a     #  print(froz
-00011490: 656e 7365 7428 7374 6f70 5f73 6574 2929  enset(stop_set))
-000114a0: 0d0a 2323 2020 2020 2020 2020 7265 7475  ..##        retu
-000114b0: 726e 2066 726f 7a65 6e73 6574 2873 746f  rn frozenset(sto
-000114c0: 705f 7365 7429 0d0a 0d0a 6465 6620 7363  p_set)....def sc
-000114d0: 7261 7065 7765 6228 7468 6575 726c 293a  rapeweb(theurl):
-000114e0: 0d0a 2020 2020 7363 7261 7065 645f 6461  ..    scraped_da
-000114f0: 7461 203d 2075 726c 6c69 622e 7265 7175  ta = urllib.requ
-00011500: 6573 742e 7572 6c6f 7065 6e28 7468 6575  est.urlopen(theu
-00011510: 726c 2920 200d 0a20 2020 2061 7274 6963  rl)  ..    artic
-00011520: 6c65 203d 2073 6372 6170 6564 5f64 6174  le = scraped_dat
-00011530: 612e 7265 6164 2829 0d0a 0d0a 2020 2020  a.read()....    
-00011540: 7061 7273 6564 5f61 7274 6963 6c65 203d  parsed_article =
-00011550: 2062 732e 4265 6175 7469 6675 6c53 6f75   bs.BeautifulSou
-00011560: 7028 6172 7469 636c 652c 276c 786d 6c27  p(article,'lxml'
-00011570: 290d 0a0d 0a20 2020 2070 6172 6167 7261  )....    paragra
-00011580: 7068 7320 3d20 7061 7273 6564 5f61 7274  phs = parsed_art
-00011590: 6963 6c65 2e66 696e 645f 616c 6c28 2770  icle.find_all('p
-000115a0: 2729 0d0a 0d0a 2020 2020 6172 7469 636c  ')....    articl
-000115b0: 655f 7465 7874 203d 2022 220d 0a0d 0a20  e_text = "".... 
-000115c0: 2020 2066 6f72 2070 2069 6e20 7061 7261     for p in para
-000115d0: 6772 6170 6873 3a20 200d 0a20 2020 2020  graphs:  ..     
-000115e0: 2020 2061 7274 6963 6c65 5f74 6578 7420     article_text 
-000115f0: 2b3d 2070 2e74 6578 740d 0a20 2020 2072  += p.text..    r
-00011600: 6574 7572 6e20 6172 7469 636c 655f 7465  eturn article_te
-00011610: 7874 200d 0a0d 0a64 6566 2063 6f6e 7665  xt ....def conve
-00011620: 7274 746f 6c6f 7765 7263 6173 6528 6466  rttolowercase(df
-00011630: 2c63 6f6c 293a 0d0a 2020 2020 2020 6466  ,col):..      df
-00011640: 5b63 6f6c 5d20 3d20 6466 5b63 6f6c 5d2e  [col] = df[col].
-00011650: 6170 706c 7928 6c61 6d62 6461 2078 3a20  apply(lambda x: 
-00011660: 2220 222e 6a6f 696e 2878 2e6c 6f77 6572  " ".join(x.lower
-00011670: 2829 2066 6f72 2078 2069 6e20 782e 7370  () for x in x.sp
-00011680: 6c69 7428 2929 290d 0a20 2020 2020 2072  lit()))..      r
-00011690: 6574 7572 6e20 6466 0d0a 2020 2020 0d0a  eturn df..    ..
-000116a0: 6465 6620 7265 6d6f 7665 7075 6e63 7475  def removepunctu
-000116b0: 6174 696f 6e28 6466 2c63 6f6c 293a 0d0a  ation(df,col):..
-000116c0: 2020 2020 2020 6466 5b63 6f6c 5d20 3d20        df[col] = 
-000116d0: 6466 5b63 6f6c 5d2e 7374 722e 7265 706c  df[col].str.repl
-000116e0: 6163 6528 275b 5e5c 775c 735d 272c 2727  ace('[^\w\s]',''
-000116f0: 290d 0a20 2020 2020 2072 6574 7572 6e20  )..      return 
-00011700: 6466 0d0a 0d0a 6465 6620 7265 6d6f 7665  df....def remove
-00011710: 7374 6f70 776f 7264 7328 6466 2c63 6f6c  stopwords(df,col
-00011720: 293a 0d0a 2020 2020 2020 7374 6f70 203d  ):..      stop =
-00011730: 2073 746f 7077 6f72 6473 2e77 6f72 6473   stopwords.words
-00011740: 2827 656e 676c 6973 6827 290d 0a20 2020  ('english')..   
-00011750: 2020 2064 665b 636f 6c5d 203d 2064 665b     df[col] = df[
-00011760: 636f 6c5d 2e61 7070 6c79 286c 616d 6264  col].apply(lambd
-00011770: 6120 783a 2022 2022 2e6a 6f69 6e28 7820  a x: " ".join(x 
-00011780: 666f 7220 7820 696e 2078 2e73 706c 6974  for x in x.split
-00011790: 2829 2069 6620 7820 6e6f 7420 696e 2073  () if x not in s
-000117a0: 746f 7029 290d 0a20 2020 2020 2072 6574  top))..      ret
-000117b0: 7572 6e20 6466 0d0a 0d0a 6465 6620 7265  urn df....def re
-000117c0: 6d6f 7665 636f 6d6d 6f6e 776f 7264 7328  movecommonwords(
-000117d0: 6466 2c63 6f6c 293a 0d0a 2020 2020 2020  df,col):..      
-000117e0: 6672 6571 203d 2070 642e 5365 7269 6573  freq = pd.Series
-000117f0: 2827 2027 2e6a 6f69 6e28 6466 5b63 6f6c  (' '.join(df[col
-00011800: 5d29 2e73 706c 6974 2829 292e 7661 6c75  ]).split()).valu
-00011810: 655f 636f 756e 7473 2829 5b3a 3130 5d0d  e_counts()[:10].
-00011820: 0a20 2020 2020 2066 7265 7120 3d20 6c69  .      freq = li
-00011830: 7374 2866 7265 712e 696e 6465 7829 0d0a  st(freq.index)..
-00011840: 2020 2020 2020 6466 5b63 6f6c 5d20 3d20        df[col] = 
-00011850: 6466 5b63 6f6c 5d2e 6170 706c 7928 6c61  df[col].apply(la
-00011860: 6d62 6461 2078 3a20 2220 222e 6a6f 696e  mbda x: " ".join
-00011870: 2878 2066 6f72 2078 2069 6e20 782e 7370  (x for x in x.sp
-00011880: 6c69 7428 2920 6966 2078 206e 6f74 2069  lit() if x not i
-00011890: 6e20 6672 6571 2929 0d0a 2020 2020 2020  n freq))..      
-000118a0: 7265 7475 726e 2064 660d 0a0d 0a64 6566  return df....def
-000118b0: 2072 656d 6f76 6572 6172 6577 6f72 6473   removerarewords
-000118c0: 2864 662c 636f 6c29 3a0d 0a20 2020 2020  (df,col):..     
-000118d0: 2066 7265 7120 3d20 7064 2e53 6572 6965   freq = pd.Serie
-000118e0: 7328 2720 272e 6a6f 696e 2864 665b 636f  s(' '.join(df[co
-000118f0: 6c5d 292e 7370 6c69 7428 2929 2e76 616c  l]).split()).val
-00011900: 7565 5f63 6f75 6e74 7328 295b 2d31 303a  ue_counts()[-10:
-00011910: 5d0d 0a20 2020 2020 2066 7265 7120 3d20  ]..      freq = 
-00011920: 6c69 7374 2866 7265 712e 696e 6465 7829  list(freq.index)
-00011930: 0d0a 2020 2020 2020 6466 5b63 6f6c 5d20  ..      df[col] 
-00011940: 3d20 6466 5b63 6f6c 5d2e 6170 706c 7928  = df[col].apply(
-00011950: 6c61 6d62 6461 2078 3a20 2220 222e 6a6f  lambda x: " ".jo
-00011960: 696e 2878 2066 6f72 2078 2069 6e20 782e  in(x for x in x.
-00011970: 7370 6c69 7428 2920 6966 2078 206e 6f74  split() if x not
-00011980: 2069 6e20 6672 6571 2929 0d0a 2020 2020   in freq))..    
-00011990: 2020 7265 7475 726e 2064 660d 0a0d 0a64    return df....d
-000119a0: 6566 2063 6f72 7265 6374 7370 656c 6c69  ef correctspelli
-000119b0: 6e67 2864 662c 636f 6c29 3a0d 0a20 2020  ng(df,col):..   
-000119c0: 2020 2064 665b 636f 6c5d 5b3a 355d 2e61     df[col][:5].a
-000119d0: 7070 6c79 286c 616d 6264 6120 783a 2073  pply(lambda x: s
-000119e0: 7472 2854 6578 7442 6c6f 6228 7829 2e63  tr(TextBlob(x).c
-000119f0: 6f72 7265 6374 2829 2929 0d0a 2020 2020  orrect()))..    
-00011a00: 2020 7265 7475 726e 2064 660d 0a0d 0a64    return df....d
-00011a10: 6566 206c 656d 6d61 7469 7a61 7469 6f6e  ef lemmatization
-00011a20: 2864 662c 636f 6c29 3a0d 0a20 2020 2020  (df,col):..     
-00011a30: 2064 665b 636f 6c5d 203d 2064 665b 636f   df[col] = df[co
-00011a40: 6c5d 2e61 7070 6c79 286c 616d 6264 6120  l].apply(lambda 
-00011a50: 783a 2022 2022 2e6a 6f69 6e28 5b57 6f72  x: " ".join([Wor
-00011a60: 6428 776f 7264 292e 6c65 6d6d 6174 697a  d(word).lemmatiz
-00011a70: 6528 2920 666f 7220 776f 7264 2069 6e20  e() for word in 
-00011a80: 782e 7370 6c69 7428 295d 2929 0d0a 2020  x.split()]))..  
-00011a90: 2020 2020 7265 7475 726e 2064 660d 0a0d      return df...
-00011aa0: 0a64 6566 2074 7261 696e 7665 6374 2863  .def trainvect(c
-00011ab0: 762c 7462 6f77 2c64 662c 636f 6c2c 6d61  v,tbow,df,col,ma
-00011ac0: 786b 6579 776f 7264 7329 3a0d 0a20 2020  xkeywords):..   
-00011ad0: 2020 2074 6578 743d 6466 5b63 6f6c 5d2e     text=df[col].
-00011ae0: 746f 6c69 7374 2829 0d0a 2020 2020 2020  tolist()..      
-00011af0: 7466 6964 6620 3d20 5466 6964 6654 7261  tfidf = TfidfTra
-00011b00: 6e73 666f 726d 6572 2873 6d6f 6f74 685f  nsformer(smooth_
-00011b10: 6964 663d 5472 7565 2c75 7365 5f69 6466  idf=True,use_idf
-00011b20: 3d54 7275 6529 0d0a 2020 2020 2020 7466  =True)..      tf
-00011b30: 6964 662e 6669 7428 7462 6f77 290d 0a20  idf.fit(tbow).. 
-00011b40: 2020 2020 2074 665f 6964 665f 7665 6374       tf_idf_vect
-00011b50: 6f72 3d74 6669 6466 2e74 7261 6e73 666f  or=tfidf.transfo
-00011b60: 726d 2863 762e 7472 616e 7366 6f72 6d28  rm(cv.transform(
-00011b70: 7465 7874 2929 0d0a 2020 2020 2020 736f  text))..      so
-00011b80: 7274 6564 6974 656d 733d 736f 7274 5f63  rteditems=sort_c
-00011b90: 6f6f 2874 665f 6964 665f 7665 6374 6f72  oo(tf_idf_vector
-00011ba0: 2e74 6f63 6f6f 2829 290d 0a20 2020 2020  .tocoo())..     
-00011bb0: 2066 6561 7475 7265 6e61 6d65 733d 6376   featurenames=cv
-00011bc0: 2e67 6574 5f66 6561 7475 7265 5f6e 616d  .get_feature_nam
-00011bd0: 6573 5f6f 7574 2829 0d0a 2020 2020 2020  es_out()..      
-00011be0: 6b65 7977 6f72 6473 3d65 7874 7261 6374  keywords=extract
-00011bf0: 5f74 6f70 6e5f 6672 6f6d 5f76 6563 746f  _topn_from_vecto
-00011c00: 7228 6665 6174 7572 656e 616d 6573 2c73  r(featurenames,s
-00011c10: 6f72 7465 6469 7465 6d73 2c6d 6178 6b65  orteditems,maxke
-00011c20: 7977 6f72 6473 290d 0a20 2020 2020 206b  ywords)..      k
-00011c30: 6579 776f 7264 733d 6a73 6f6e 2e64 756d  eywords=json.dum
-00011c40: 7073 286b 6579 776f 7264 7329 0d0a 2020  ps(keywords)..  
-00011c50: 2020 2023 2070 7269 6e74 286b 6579 776f     # print(keywo
-00011c60: 7264 7329 0d0a 2020 2020 2020 7265 7475  rds)..      retu
-00011c70: 726e 206b 6579 776f 7264 730d 0a0d 0a64  rn keywords....d
-00011c80: 6566 2074 7261 696e 626f 7728 6466 2c63  ef trainbow(df,c
-00011c90: 6f6c 293a 0d0a 2020 2020 2020 6d79 6c69  ol):..      myli
-00011ca0: 7374 3d64 665b 636f 6c5d 2e74 6f6c 6973  st=df[col].tolis
-00011cb0: 7428 290d 0a20 2020 2020 2073 746f 7077  t()..      stopw
-00011cc0: 6f72 6473 3d67 6574 5f73 746f 705f 776f  ords=get_stop_wo
-00011cd0: 7264 7328 290d 0a20 2020 2020 2063 7620  rds()..      cv 
-00011ce0: 3d20 436f 756e 7456 6563 746f 7269 7a65  = CountVectorize
-00011cf0: 7228 7374 6f70 5f77 6f72 6473 3d73 746f  r(stop_words=sto
-00011d00: 7077 6f72 6473 290d 0a20 2020 2020 2074  pwords)..      t
-00011d10: 7261 696e 5f62 6f77 203d 2063 762e 6669  rain_bow = cv.fi
-00011d20: 745f 7472 616e 7366 6f72 6d28 6d79 6c69  t_transform(myli
-00011d30: 7374 290d 0a20 2020 2020 2023 7072 696e  st)..      #prin
-00011d40: 7428 6c69 7374 2863 762e 766f 6361 6275  t(list(cv.vocabu
-00011d50: 6c61 7279 5f2e 6b65 7973 2829 2929 0d0a  lary_.keys()))..
-00011d60: 2020 2020 2020 7265 7475 726e 2063 762c        return cv,
-00011d70: 7472 6169 6e5f 626f 770d 0a0d 0a20 0d0a  train_bow.... ..
-00011d80: 6465 6620 736f 7274 5f63 6f6f 2863 6f6f  def sort_coo(coo
-00011d90: 5f6d 6174 7269 7829 3a0d 0a20 2020 2074  _matrix):..    t
-00011da0: 7570 6c65 7320 3d20 7a69 7028 636f 6f5f  uples = zip(coo_
-00011db0: 6d61 7472 6978 2e63 6f6c 2c20 636f 6f5f  matrix.col, coo_
-00011dc0: 6d61 7472 6978 2e64 6174 6129 0d0a 2020  matrix.data)..  
-00011dd0: 2020 7265 7475 726e 2073 6f72 7465 6428    return sorted(
-00011de0: 7475 706c 6573 2c20 6b65 793d 6c61 6d62  tuples, key=lamb
-00011df0: 6461 2078 3a20 2878 5b31 5d2c 2078 5b30  da x: (x[1], x[0
-00011e00: 5d29 2c20 7265 7665 7273 653d 5472 7565  ]), reverse=True
-00011e10: 290d 0a0d 0a64 6566 2065 7874 7261 6374  )....def extract
-00011e20: 5f74 6f70 6e5f 6672 6f6d 5f76 6563 746f  _topn_from_vecto
-00011e30: 7228 6665 6174 7572 655f 6e61 6d65 732c  r(feature_names,
-00011e40: 2073 6f72 7465 645f 6974 656d 732c 2074   sorted_items, t
-00011e50: 6f70 6e3d 3130 293a 0d0a 2020 2020 2222  opn=10):..    ""
-00011e60: 2267 6574 2074 6865 2066 6561 7475 7265  "get the feature
-00011e70: 206e 616d 6573 2061 6e64 2074 662d 6964   names and tf-id
-00011e80: 6620 7363 6f72 6520 6f66 2074 6f70 206e  f score of top n
-00011e90: 2069 7465 6d73 2222 220d 0a20 2020 200d   items"""..    .
-00011ea0: 0a20 2020 2023 7573 6520 6f6e 6c79 2074  .    #use only t
-00011eb0: 6f70 6e20 6974 656d 7320 6672 6f6d 2076  opn items from v
-00011ec0: 6563 746f 720d 0a20 2020 2073 6f72 7465  ector..    sorte
-00011ed0: 645f 6974 656d 7320 3d20 736f 7274 6564  d_items = sorted
-00011ee0: 5f69 7465 6d73 5b3a 746f 706e 5d0d 0a0d  _items[:topn]...
-00011ef0: 0a20 2020 2073 636f 7265 5f76 616c 7320  .    score_vals 
-00011f00: 3d20 5b5d 0d0a 2020 2020 6665 6174 7572  = []..    featur
-00011f10: 655f 7661 6c73 203d 205b 5d0d 0a0d 0a20  e_vals = [].... 
-00011f20: 2020 2066 6f72 2069 6478 2c20 7363 6f72     for idx, scor
-00011f30: 6520 696e 2073 6f72 7465 645f 6974 656d  e in sorted_item
-00011f40: 733a 2020 2020 2020 2020 0d0a 2020 2020  s:        ..    
-00011f50: 2020 2020 2020 666e 616d 6520 3d20 6665        fname = fe
-00011f60: 6174 7572 655f 6e61 6d65 735b 6964 785d  ature_names[idx]
-00011f70: 0d0a 2020 2020 2020 2020 2020 6966 206c  ..          if l
-00011f80: 656e 2866 6e61 6d65 293e 333a 0d0a 2020  en(fname)>3:..  
-00011f90: 2020 2020 2020 236b 6565 7020 7472 6163        #keep trac
-00011fa0: 6b20 6f66 2066 6561 7475 7265 206e 616d  k of feature nam
-00011fb0: 6520 616e 6420 6974 7320 636f 7272 6573  e and its corres
-00011fc0: 706f 6e64 696e 6720 7363 6f72 650d 0a20  ponding score.. 
-00011fd0: 2020 2020 2020 2020 2020 2073 636f 7265             score
-00011fe0: 5f76 616c 732e 6170 7065 6e64 2872 6f75  _vals.append(rou
-00011ff0: 6e64 2873 636f 7265 2c20 3329 290d 0a20  nd(score, 3)).. 
-00012000: 2020 2020 2020 2020 2020 2066 6561 7475             featu
-00012010: 7265 5f76 616c 732e 6170 7065 6e64 2866  re_vals.append(f
-00012020: 6561 7475 7265 5f6e 616d 6573 5b69 6478  eature_names[idx
-00012030: 5d29 0d0a 0d0a 2020 2020 2363 7265 6174  ])....    #creat
-00012040: 6520 6120 7475 706c 6573 206f 6620 6665  e a tuples of fe
-00012050: 6174 7572 652c 7363 6f72 650d 0a20 2020  ature,score..   
-00012060: 2023 7265 7375 6c74 7320 3d20 7a69 7028   #results = zip(
-00012070: 6665 6174 7572 655f 7661 6c73 2c73 636f  feature_vals,sco
-00012080: 7265 5f76 616c 7329 0d0a 2020 2020 7265  re_vals)..    re
-00012090: 7375 6c74 733d 207b 7d0d 0a20 2020 2066  sults= {}..    f
-000120a0: 6f72 2069 6478 2069 6e20 7261 6e67 6528  or idx in range(
-000120b0: 6c65 6e28 6665 6174 7572 655f 7661 6c73  len(feature_vals
-000120c0: 2929 3a0d 0a20 2020 2020 2020 2072 6573  )):..        res
-000120d0: 756c 7473 5b66 6561 7475 7265 5f76 616c  ults[feature_val
-000120e0: 735b 6964 785d 5d3d 7363 6f72 655f 7661  s[idx]]=score_va
-000120f0: 6c73 5b69 6478 5d0d 0a20 2020 200d 0a20  ls[idx]..    .. 
-00012100: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-00012110: 730d 0a0d 0a64 6566 2067 6574 6b65 7977  s....def getkeyw
-00012120: 6f72 6473 286d 7974 6578 742c 6d61 786b  ords(mytext,maxk
-00012130: 6579 776f 7264 7329 3a0d 0a20 2020 2072  eywords):..    r
-00012140: 3d52 616b 6528 6d61 785f 6c65 6e67 7468  =Rake(max_length
-00012150: 3d31 3029 0d0a 2020 2020 7220 3d20 5261  =10)..    r = Ra
-00012160: 6b65 2872 616e 6b69 6e67 5f6d 6574 7269  ke(ranking_metri
-00012170: 633d 4d65 7472 6963 2e44 4547 5245 455f  c=Metric.DEGREE_
-00012180: 544f 5f46 5245 5155 454e 4359 5f52 4154  TO_FREQUENCY_RAT
-00012190: 494f 290d 0a20 2020 2023 7220 3d20 5261  IO)..    #r = Ra
-000121a0: 6b65 2872 616e 6b69 6e67 5f6d 6574 7269  ke(ranking_metri
-000121b0: 633d 4d65 7472 6963 2e57 4f52 445f 4445  c=Metric.WORD_DE
-000121c0: 4752 4545 290d 0a20 2020 2023 7220 3d20  GREE)..    #r = 
-000121d0: 5261 6b65 2872 616e 6b69 6e67 5f6d 6574  Rake(ranking_met
-000121e0: 7269 633d 4d65 7472 6963 2e57 4f52 445f  ric=Metric.WORD_
-000121f0: 4652 4551 5545 4e43 5929 0d0a 2020 2020  FREQUENCY)..    
-00012200: 643d 7b27 696e 7075 7427 3a5b 6d79 7465  d={'input':[myte
-00012210: 7874 5d7d 0d0a 2020 2020 6466 203d 2070  xt]}..    df = p
-00012220: 642e 4461 7461 4672 616d 6528 6429 0d0a  d.DataFrame(d)..
-00012230: 2020 2020 6466 3d63 6f6e 7665 7274 746f      df=convertto
-00012240: 6c6f 7765 7263 6173 6528 6466 2c27 696e  lowercase(df,'in
-00012250: 7075 7427 290d 0a20 2020 2064 663d 7265  put')..    df=re
-00012260: 6d6f 7665 7075 6e63 7475 6174 696f 6e28  movepunctuation(
-00012270: 6466 2c27 696e 7075 7427 290d 0a20 2020  df,'input')..   
-00012280: 2064 663d 7265 6d6f 7665 7374 6f70 776f   df=removestopwo
-00012290: 7264 7328 6466 2c27 696e 7075 7427 290d  rds(df,'input').
-000122a0: 0a20 2020 2064 663d 7265 6d6f 7665 636f  .    df=removeco
-000122b0: 6d6d 6f6e 776f 7264 7328 6466 2c27 696e  mmonwords(df,'in
-000122c0: 7075 7427 290d 0a20 2020 2064 663d 7265  put')..    df=re
-000122d0: 6d6f 7665 7261 7265 776f 7264 7328 6466  moverarewords(df
-000122e0: 2c27 696e 7075 7427 290d 0a20 2020 2064  ,'input')..    d
-000122f0: 663d 636f 7272 6563 7473 7065 6c6c 696e  f=correctspellin
-00012300: 6728 6466 2c27 696e 7075 7427 290d 0a20  g(df,'input').. 
-00012310: 2020 2064 663d 6c65 6d6d 6174 697a 6174     df=lemmatizat
-00012320: 696f 6e28 6466 2c27 696e 7075 7427 290d  ion(df,'input').
-00012330: 0a20 2020 206d 7974 6578 743d 6466 5b27  .    mytext=df['
-00012340: 696e 7075 7427 5d5b 305d 0d0a 2020 2020  input'][0]..    
-00012350: 6376 2c74 773d 7472 6169 6e62 6f77 2864  cv,tw=trainbow(d
-00012360: 662c 2769 6e70 7574 2729 0d0a 2020 2020  f,'input')..    
-00012370: 6b65 7977 6f72 6473 3d74 7261 696e 7665  keywords=trainve
-00012380: 6374 2863 762c 7477 2c64 662c 2769 6e70  ct(cv,tw,df,'inp
-00012390: 7574 272c 6d61 786b 6579 776f 7264 7329  ut',maxkeywords)
-000123a0: 0d0a 0d0a 2020 2020 0d0a 2020 2020 6b65  ....    ..    ke
-000123b0: 7962 7566 203d 2022 220d 0a20 2020 206b  ybuf = ""..    k
-000123c0: 6a73 6f6e 203d 206a 736f 6e2e 6c6f 6164  json = json.load
-000123d0: 7328 6b65 7977 6f72 6473 290d 0a20 2020  s(keywords)..   
-000123e0: 2066 6f72 206b 6579 2c20 7661 6c75 6520   for key, value 
-000123f0: 696e 206b 6a73 6f6e 2e69 7465 6d73 2829  in kjson.items()
-00012400: 3a0d 0a20 2020 2020 2020 206b 6579 6275  :..        keybu
-00012410: 6620 3d20 6b65 7962 7566 202b 206b 6579  f = keybuf + key
-00012420: 202b 222c 2220 2b20 7374 7228 7661 6c75   +"," + str(valu
-00012430: 6529 202b 2022 3a22 0d0a 2020 2020 6b65  e) + ":"..    ke
-00012440: 7962 7566 203d 206b 6579 6275 665b 3a2d  ybuf = keybuf[:-
-00012450: 315d 0d0a 0d0a 2020 2020 7265 7475 726e  1]....    return
-00012460: 206b 6579 6275 660d 0a20 0d0a 6465 6620   keybuf.. ..def 
-00012470: 646f 7375 6d6d 6172 7928 6172 7469 636c  dosummary(articl
-00012480: 655f 7465 7874 2c69 293a 0d0a 0d0a 0d0a  e_text,i):......
-00012490: 2020 2020 6172 7469 636c 655f 7465 7874      article_text
-000124a0: 203d 2072 652e 7375 6228 7227 5c5b 5b30   = re.sub(r'\[[0
-000124b0: 2d39 5d2a 5c5d 272c 2027 2027 2c20 6172  -9]*\]', ' ', ar
-000124c0: 7469 636c 655f 7465 7874 2920 200d 0a20  ticle_text)  .. 
-000124d0: 2020 2061 7274 6963 6c65 5f74 6578 7420     article_text 
-000124e0: 3d20 7265 2e73 7562 2872 275c 732b 272c  = re.sub(r'\s+',
-000124f0: 2027 2027 2c20 6172 7469 636c 655f 7465   ' ', article_te
-00012500: 7874 290d 0a0d 0a20 2020 2023 2052 656d  xt)....    # Rem
-00012510: 6f76 696e 6720 7370 6563 6961 6c20 6368  oving special ch
-00012520: 6172 6163 7465 7273 2061 6e64 2064 6967  aracters and dig
-00012530: 6974 730d 0a20 2020 2066 6f72 6d61 7474  its..    formatt
-00012540: 6564 5f61 7274 6963 6c65 5f74 6578 7420  ed_article_text 
-00012550: 3d20 7265 2e73 7562 2827 5b5e 612d 7a41  = re.sub('[^a-zA
-00012560: 2d5a 5d27 2c20 2720 272c 2061 7274 6963  -Z]', ' ', artic
-00012570: 6c65 5f74 6578 7420 2920 200d 0a20 2020  le_text )  ..   
-00012580: 2066 6f72 6d61 7474 6564 5f61 7274 6963   formatted_artic
-00012590: 6c65 5f74 6578 7420 3d20 7265 2e73 7562  le_text = re.sub
-000125a0: 2872 275c 732b 272c 2027 2027 2c20 666f  (r'\s+', ' ', fo
-000125b0: 726d 6174 7465 645f 6172 7469 636c 655f  rmatted_article_
-000125c0: 7465 7874 2920 200d 0a0d 0a20 2020 2073  text)  ....    s
-000125d0: 656e 7465 6e63 655f 6c69 7374 203d 206e  entence_list = n
-000125e0: 6c74 6b2e 7365 6e74 5f74 6f6b 656e 697a  ltk.sent_tokeniz
-000125f0: 6528 6172 7469 636c 655f 7465 7874 2920  e(article_text) 
-00012600: 200d 0a20 2020 2023 7072 696e 7428 7365   ..    #print(se
-00012610: 6e74 656e 6365 5f6c 6973 7429 0d0a 0d0a  ntence_list)....
-00012620: 2020 2020 7374 6f70 776f 7264 7320 3d20      stopwords = 
-00012630: 6e6c 746b 2e63 6f72 7075 732e 7374 6f70  nltk.corpus.stop
-00012640: 776f 7264 732e 776f 7264 7328 2765 6e67  words.words('eng
-00012650: 6c69 7368 2729 0d0a 0d0a 2020 2020 776f  lish')....    wo
-00012660: 7264 5f66 7265 7175 656e 6369 6573 203d  rd_frequencies =
-00012670: 207b 7d20 200d 0a20 2020 2066 6f72 2077   {}  ..    for w
-00012680: 6f72 6420 696e 206e 6c74 6b2e 776f 7264  ord in nltk.word
-00012690: 5f74 6f6b 656e 697a 6528 666f 726d 6174  _tokenize(format
-000126a0: 7465 645f 6172 7469 636c 655f 7465 7874  ted_article_text
-000126b0: 293a 2020 0d0a 2020 2020 2020 2020 6966  ):  ..        if
-000126c0: 2077 6f72 6420 6e6f 7420 696e 2073 746f   word not in sto
-000126d0: 7077 6f72 6473 3a0d 0a20 2020 2020 2020  pwords:..       
-000126e0: 2020 2020 2069 6620 776f 7264 206e 6f74       if word not
-000126f0: 2069 6e20 776f 7264 5f66 7265 7175 656e   in word_frequen
-00012700: 6369 6573 2e6b 6579 7328 293a 0d0a 2020  cies.keys():..  
-00012710: 2020 2020 2020 2020 2020 2020 2020 776f                wo
-00012720: 7264 5f66 7265 7175 656e 6369 6573 5b77  rd_frequencies[w
-00012730: 6f72 645d 203d 2031 0d0a 2020 2020 2020  ord] = 1..      
-00012740: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-00012750: 2020 2020 2020 2020 2020 2020 2077 6f72               wor
-00012760: 645f 6672 6571 7565 6e63 6965 735b 776f  d_frequencies[wo
-00012770: 7264 5d20 2b3d 2031 0d0a 0d0a 2020 2020  rd] += 1....    
-00012780: 6d61 7869 6d75 6d5f 6672 6571 756e 6379  maximum_frequncy
-00012790: 203d 206d 6178 2877 6f72 645f 6672 6571   = max(word_freq
-000127a0: 7565 6e63 6965 732e 7661 6c75 6573 2829  uencies.values()
-000127b0: 290d 0a0d 0a20 2020 2066 6f72 2077 6f72  )....    for wor
-000127c0: 6420 696e 2077 6f72 645f 6672 6571 7565  d in word_freque
-000127d0: 6e63 6965 732e 6b65 7973 2829 3a20 200d  ncies.keys():  .
-000127e0: 0a20 2020 2020 2020 2077 6f72 645f 6672  .        word_fr
-000127f0: 6571 7565 6e63 6965 735b 776f 7264 5d20  equencies[word] 
-00012800: 3d20 2877 6f72 645f 6672 6571 7565 6e63  = (word_frequenc
-00012810: 6965 735b 776f 7264 5d2f 6d61 7869 6d75  ies[word]/maximu
-00012820: 6d5f 6672 6571 756e 6379 290d 0a0d 0a20  m_frequncy).... 
-00012830: 2020 2023 7072 696e 7428 776f 7264 5f66     #print(word_f
-00012840: 7265 7175 656e 6369 6573 290d 0a0d 0a20  requencies).... 
-00012850: 2020 2073 656e 7465 6e63 655f 7363 6f72     sentence_scor
-00012860: 6573 203d 207b 7d20 200d 0a20 2020 2066  es = {}  ..    f
-00012870: 6f72 2073 656e 7420 696e 2073 656e 7465  or sent in sente
-00012880: 6e63 655f 6c69 7374 3a20 200d 0a20 2020  nce_list:  ..   
-00012890: 2020 2020 2066 6f72 2077 6f72 6420 696e       for word in
-000128a0: 206e 6c74 6b2e 776f 7264 5f74 6f6b 656e   nltk.word_token
-000128b0: 697a 6528 7365 6e74 2e6c 6f77 6572 2829  ize(sent.lower()
-000128c0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-000128d0: 6966 2077 6f72 6420 696e 2077 6f72 645f  if word in word_
-000128e0: 6672 6571 7565 6e63 6965 732e 6b65 7973  frequencies.keys
-000128f0: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
-00012900: 2020 2020 2069 6620 6c65 6e28 7365 6e74       if len(sent
-00012910: 2e73 706c 6974 2827 2027 2929 203c 2032  .split(' ')) < 2
-00012920: 353a 0d0a 2020 2020 2020 2020 2020 2020  5:..            
-00012930: 2020 2020 2020 2020 6966 2073 656e 7420          if sent 
-00012940: 6e6f 7420 696e 2073 656e 7465 6e63 655f  not in sentence_
-00012950: 7363 6f72 6573 2e6b 6579 7328 293a 0d0a  scores.keys():..
-00012960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012970: 2020 2020 2020 2020 7365 6e74 656e 6365          sentence
-00012980: 5f73 636f 7265 735b 7365 6e74 5d20 3d20  _scores[sent] = 
-00012990: 776f 7264 5f66 7265 7175 656e 6369 6573  word_frequencies
-000129a0: 5b77 6f72 645d 0d0a 2020 2020 2020 2020  [word]..        
-000129b0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000129c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-000129d0: 2020 2020 2020 2020 2020 2073 656e 7465             sente
-000129e0: 6e63 655f 7363 6f72 6573 5b73 656e 745d  nce_scores[sent]
-000129f0: 202b 3d20 776f 7264 5f66 7265 7175 656e   += word_frequen
-00012a00: 6369 6573 5b77 6f72 645d 0d0a 0d0a 2020  cies[word]....  
-00012a10: 2020 2370 7269 6e74 2873 656e 7465 6e63    #print(sentenc
-00012a20: 655f 7363 6f72 6573 290d 0a0d 0a20 2020  e_scores)....   
-00012a30: 2073 756d 6d61 7279 5f73 656e 7465 6e63   summary_sentenc
-00012a40: 6573 203d 2068 6561 7071 2e6e 6c61 7267  es = heapq.nlarg
-00012a50: 6573 7428 692c 2073 656e 7465 6e63 655f  est(i, sentence_
-00012a60: 7363 6f72 6573 2c20 6b65 793d 7365 6e74  scores, key=sent
-00012a70: 656e 6365 5f73 636f 7265 732e 6765 7429  ence_scores.get)
-00012a80: 0d0a 2020 2020 2370 7269 6e74 2873 756d  ..    #print(sum
-00012a90: 6d61 7279 5f73 656e 7465 6e63 6573 290d  mary_sentences).
-00012aa0: 0a20 2020 2073 756d 6d61 7279 203d 2027  .    summary = '
-00012ab0: 2027 2e6a 6f69 6e28 7375 6d6d 6172 795f   '.join(summary_
-00012ac0: 7365 6e74 656e 6365 7329 0d0a 2020 2020  sentences)..    
-00012ad0: 2370 7269 6e74 2822 4149 2053 756d 6d61  #print("AI Summa
-00012ae0: 7279 2229 0d0a 2020 2020 7265 7475 726e  ry")..    return
-00012af0: 2073 756d 6d61 7279 0d0a 0d0a 6465 6620   summary....def 
-00012b00: 7374 6172 7473 756d 6d61 7279 2861 7274  startsummary(art
-00012b10: 6963 6c65 5f74 6578 742c 6676 616c 7565  icle_text,fvalue
-00012b20: 2c6d 6178 6b65 7977 6f72 6473 293a 0d0a  ,maxkeywords):..
-00012b30: 2020 2020 2020 0d0a 2023 2074 7279 3a0d        .. # try:.
-00012b40: 0a20 2020 6f72 6967 696e 616c 776f 7264  .   originalword
-00012b50: 7320 3d20 6c65 6e28 6172 7469 636c 655f  s = len(article_
-00012b60: 7465 7874 2e73 706c 6974 2822 2022 2929  text.split(" "))
-00012b70: 0d0a 0d0a 2020 2066 6f72 2069 2069 6e20  ....   for i in 
-00012b80: 7261 6e67 6528 312c 3130 3030 3029 3a0d  range(1,10000):.
-00012b90: 0a20 2020 2020 7375 6d6d 6172 793d 646f  .     summary=do
-00012ba0: 7375 6d6d 6172 7928 6172 7469 636c 655f  summary(article_
-00012bb0: 7465 7874 2c69 290d 0a20 2020 2020 7265  text,i)..     re
-00012bc0: 7320 3d20 6c65 6e28 7375 6d6d 6172 792e  s = len(summary.
-00012bd0: 7370 6c69 7428 2929 0d0a 2020 2020 2069  split())..     i
-00012be0: 6620 7265 7320 3e3d 2066 7661 6c75 653a  f res >= fvalue:
-00012bf0: 0d0a 2020 2020 2020 2020 2062 7265 616b  ..         break
-00012c00: 0d0a 0d0a 2020 2073 756d 6d61 7279 203d  ....   summary =
-00012c10: 2020 7265 2e73 7562 2822 5c5c 5c5c 785b    re.sub("\\\\x[
-00012c20: 612d 6630 2d39 5d5b 612d 6630 2d39 5d22  a-f0-9][a-f0-9]"
-00012c30: 2c20 2220 222c 7375 6d6d 6172 7929 0d0a  , " ",summary)..
-00012c40: 2020 2073 756d 6d61 7279 203d 2072 652e     summary = re.
-00012c50: 7375 6228 225c 5c78 6532 5c5c 7838 305c  sub("\\xe2\\x80\
-00012c60: 5c78 3939 222c 2227 222c 2073 756d 6d61  \x99","'", summa
-00012c70: 7279 290d 0a20 2020 7375 6d6d 6172 793d  ry)..   summary=
-00012c80: 7375 6d6d 6172 792e 7265 706c 6163 6528  summary.replace(
-00012c90: 225c 5c78 6532 5c5c 7838 305c 5c78 3939  "\\xe2\\x80\\x99
-00012ca0: 222c 2227 2229 0d0a 2020 2073 756d 6d61  ","'")..   summa
-00012cb0: 7279 3d73 756d 6d61 7279 2e72 6570 6c61  ry=summary.repla
-00012cc0: 6365 2822 5c5c 7865 325c 5c78 3830 5c5c  ce("\\xe2\\x80\\
-00012cd0: 7839 3022 2c22 2d22 290d 0a20 2020 7375  x90","-")..   su
-00012ce0: 6d6d 6172 793d 7375 6d6d 6172 792e 7265  mmary=summary.re
-00012cf0: 706c 6163 6528 225c 5c78 6532 5c5c 7838  place("\\xe2\\x8
-00012d00: 305c 5c78 3931 222c 222d 2229 0d0a 2020  0\\x91","-")..  
-00012d10: 2073 756d 6d61 7279 3d73 756d 6d61 7279   summary=summary
-00012d20: 2e72 6570 6c61 6365 2822 5c5c 7865 325c  .replace("\\xe2\
-00012d30: 5c78 3830 5c5c 7839 3222 2c22 2d22 290d  \x80\\x92","-").
-00012d40: 0a20 2020 7375 6d6d 6172 793d 7375 6d6d  .   summary=summ
-00012d50: 6172 792e 7265 706c 6163 6528 225c 5c78  ary.replace("\\x
-00012d60: 6532 5c5c 7838 305c 5c78 3933 222c 222d  e2\\x80\\x93","-
-00012d70: 2229 0d0a 2020 2073 756d 6d61 7279 3d73  ")..   summary=s
-00012d80: 756d 6d61 7279 2e72 6570 6c61 6365 2822  ummary.replace("
-00012d90: 5c5c 7865 325c 5c78 3830 5c5c 7839 3422  \\xe2\\x80\\x94"
-00012da0: 2c22 2d22 290d 0a20 2020 7375 6d6d 6172  ,"-")..   summar
-00012db0: 793d 7375 6d6d 6172 792e 7265 706c 6163  y=summary.replac
-00012dc0: 6528 225c 5c78 6532 5c5c 7838 305c 5c78  e("\\xe2\\x80\\x
-00012dd0: 3935 222c 222d 2229 0d0a 2020 2073 756d  95","-")..   sum
-00012de0: 6d61 7279 3d73 756d 6d61 7279 2e72 6570  mary=summary.rep
-00012df0: 6c61 6365 2822 5c5c 7865 325c 5c78 3830  lace("\\xe2\\x80
-00012e00: 5c5c 7862 3322 2c27 2227 290d 0a20 2020  \\xb3",'"')..   
-00012e10: 7375 6d6d 6172 7920 3d20 7375 6d6d 6172  summary = summar
-00012e20: 792e 7265 706c 6163 6528 27e2 809c 272c  y.replace('...',
-00012e30: 2027 2227 290d 0a20 2020 7375 6d6d 6172   '"')..   summar
-00012e40: 7920 3d20 7375 6d6d 6172 792e 7265 706c  y = summary.repl
-00012e50: 6163 6528 27e2 809d 272c 2027 2227 290d  ace('...', '"').
-00012e60: 0a20 2020 7375 6d6d 6172 7920 3d20 7375  .   summary = su
-00012e70: 6d6d 6172 792e 7265 706c 6163 6528 27e2  mmary.replace('.
-00012e80: 8099 272c 2022 2722 290d 0a20 2020 7375  ..', "'")..   su
-00012e90: 6d6d 6172 7920 3d20 7375 6d6d 6172 792e  mmary = summary.
-00012ea0: 7265 706c 6163 6528 27e2 8098 272c 2022  replace('...', "
-00012eb0: 2722 290d 0a20 2020 7375 6d6d 6172 7920  '")..   summary 
-00012ec0: 3d20 7375 6d6d 6172 792e 7265 706c 6163  = summary.replac
-00012ed0: 6528 27e2 8093 272c 2022 2d22 290d 0a20  e('...', "-").. 
-00012ee0: 2020 7375 6d6d 6172 7920 3d20 7375 6d6d    summary = summ
-00012ef0: 6172 792e 7265 706c 6163 6528 27e2 80a6  ary.replace('...
-00012f00: 272c 2022 2e2e 2e22 290d 0a20 2020 7375  ', "...")..   su
-00012f10: 6d6d 6172 7920 3d20 7375 6d6d 6172 792e  mmary = summary.
-00012f20: 7265 706c 6163 6528 27e2 8094 272c 2022  replace('...', "
-00012f30: 2d22 290d 0a20 2020 7375 6d6d 6172 7920  -")..   summary 
-00012f40: 3d20 7375 6d6d 6172 792e 7265 706c 6163  = summary.replac
-00012f50: 6528 2722 272c 2022 2229 0d0a 0d0a 2020  e('"', "")....  
-00012f60: 2073 756d 6d61 7279 203d 2073 756d 6d61   summary = summa
-00012f70: 7279 2e72 6570 6c61 6365 2827 5c5c 7527  ry.replace('\\u'
-00012f80: 2c27 552b 2729 0d0a 2020 2073 756d 6d61  ,'U+')..   summa
-00012f90: 7279 203d 2072 652e 7375 6228 7227 3c55  ry = re.sub(r'<U
-00012fa0: 5c2b 285b 302d 3961 2d66 412d 465d 7b34  \+([0-9a-fA-F]{4
-00012fb0: 2c36 7d29 3e27 2c20 6c61 6d62 6461 2078  ,6})>', lambda x
-00012fc0: 3a20 6368 7228 696e 7428 782e 6772 6f75  : chr(int(x.grou
-00012fd0: 7028 3129 2c31 3629 292c 2073 756d 6d61  p(1),16)), summa
-00012fe0: 7279 290d 0a0d 0a20 2020 6b65 7977 6f72  ry)....   keywor
-00012ff0: 6473 3d67 6574 6b65 7977 6f72 6473 2873  ds=getkeywords(s
-00013000: 756d 6d61 7279 2c6d 6178 6b65 7977 6f72  ummary,maxkeywor
-00013010: 6473 290d 0a0d 0a20 2020 7375 6d6d 6172  ds)....   summar
-00013020: 7977 6f72 6473 203d 206c 656e 2873 756d  ywords = len(sum
-00013030: 6d61 7279 2e73 706c 6974 2822 2022 2929  mary.split(" "))
-00013040: 0d0a 200d 0a20 2020 6d61 696e 6f75 743d  .. ..   mainout=
-00013050: 225c 2222 202b 206b 6579 776f 7264 7320  "\"" + keywords 
-00013060: 2b20 225c 222c 5c22 6f72 6967 696e 616c  + "\",\"original
-00013070: 776f 7264 636f 756e 745c 223a 2220 2b20  wordcount\":" + 
-00013080: 7374 7228 6f72 6967 696e 616c 776f 7264  str(originalword
-00013090: 7329 202b 2022 2c5c 2273 756d 6d61 7279  s) + ",\"summary
-000130a0: 776f 7264 636f 756e 745c 223a 222b 2073  wordcount\":"+ s
-000130b0: 7472 2873 756d 6d61 7279 776f 7264 7329  tr(summarywords)
-000130c0: 202b 222c 5c22 6d61 696e 7375 6d6d 6172   +",\"mainsummar
-000130d0: 795c 223a 7b5c 2273 756d 6d61 7279 5c22  y\":{\"summary\"
-000130e0: 3a20 5c22 2220 2b20 7375 6d6d 6172 7920  : \"" + summary 
-000130f0: 2b20 225c 227d 7d22 0d0a 2020 2072 6574  + "\"}}"..   ret
-00013100: 7572 6e20 6d61 696e 6f75 740d 0a20 2020  urn mainout..   
-00013110: 0d0a 2323 2323 2323 2323 2323 2323 2323  ..##############
-00013120: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00013130: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00013140: 2323 230d 0a0d 0a66 726f 6d20 6c61 6e67  ###....from lang
-00013150: 6368 6169 6e2e 656d 6265 6464 696e 6773  chain.embeddings
-00013160: 2e6f 7065 6e61 6920 696d 706f 7274 204f  .openai import O
-00013170: 7065 6e41 4945 6d62 6564 6469 6e67 730d  penAIEmbeddings.
-00013180: 0a66 726f 6d20 6c61 6e67 6368 6169 6e2e  .from langchain.
-00013190: 7465 7874 5f73 706c 6974 7465 7220 696d  text_splitter im
-000131a0: 706f 7274 2043 6861 7261 6374 6572 5465  port CharacterTe
-000131b0: 7874 5370 6c69 7474 6572 0d0a 6672 6f6d  xtSplitter..from
-000131c0: 206c 616e 6763 6861 696e 2e76 6563 746f   langchain.vecto
-000131d0: 7273 746f 7265 732e 6661 6973 7320 696d  rstores.faiss im
-000131e0: 706f 7274 2046 4149 5353 0d0a 0d0a 6672  port FAISS....fr
-000131f0: 6f6d 206c 616e 6763 6861 696e 2e63 6861  om langchain.cha
-00013200: 696e 732e 7175 6573 7469 6f6e 5f61 6e73  ins.question_ans
-00013210: 7765 7269 6e67 2069 6d70 6f72 7420 6c6f  wering import lo
-00013220: 6164 5f71 615f 6368 6169 6e0d 0a66 726f  ad_qa_chain..fro
-00013230: 6d20 6c61 6e67 6368 6169 6e2e 6c6c 6d73  m langchain.llms
-00013240: 2069 6d70 6f72 7420 5072 6f6d 7074 4c61   import PromptLa
-00013250: 7965 724f 7065 6e41 4943 6861 740d 0a66  yerOpenAIChat..f
-00013260: 726f 6d20 6c61 6e67 6368 6169 6e2e 6368  rom langchain.ch
-00013270: 6174 5f6d 6f64 656c 7320 696d 706f 7274  at_models import
-00013280: 2043 6861 744f 7065 6e41 490d 0a66 726f   ChatOpenAI..fro
-00013290: 6d20 6c61 6e67 6368 6169 6e2e 6c6c 6d73  m langchain.llms
-000132a0: 2069 6d70 6f72 7420 4f70 656e 4149 0d0a   import OpenAI..
-000132b0: 696d 706f 7274 2068 6173 686c 6962 0d0a  import hashlib..
-000132c0: 0d0a 2320 416e 7377 6572 2071 7565 7374  ..# Answer quest
-000132d0: 696f 6e73 2061 626f 7574 2074 6865 2068  ions about the h
-000132e0: 6561 646c 696e 6573 0d0a 6465 6620 7374  eadlines..def st
-000132f0: 6172 745f 636f 6e76 6572 7361 7469 6f6e  art_conversation
-00013300: 286f 7065 6e61 696b 6579 2c71 7565 7279  (openaikey,query
-00013310: 2c74 6578 742c 7465 6d70 6572 6174 7572  ,text,temperatur
-00013320: 652c 6d6f 6465 6c29 3a0d 0a20 2020 2023  e,model):..    #
-00013330: 2047 7261 6220 7468 6520 696e 7075 7420   Grab the input 
-00013340: 6672 6f6d 2074 6865 2041 5049 0d0a 2020  from the API..  
-00013350: 2020 2020 2020 2371 7565 7279 203d 2069        #query = i
-00013360: 6e70 7574 735b 2271 7565 7279 220d 0a0d  nputs["query"...
-00013370: 0a0d 0a20 2020 2020 2020 2074 6578 745f  ...        text_
-00013380: 7370 6c69 7474 6572 203d 2043 6861 7261  splitter = Chara
-00013390: 6374 6572 5465 7874 5370 6c69 7474 6572  cterTextSplitter
-000133a0: 280d 0a20 2020 2020 2020 2020 2020 2073  (..            s
-000133b0: 6570 6172 6174 6f72 3d22 2022 2c0d 0a20  eparator=" ",.. 
-000133c0: 2020 2020 2020 2020 2020 2063 6875 6e6b             chunk
-000133d0: 5f73 697a 653d 3130 3030 2c0d 0a20 2020  _size=1000,..   
-000133e0: 2020 2020 2020 2020 2063 6875 6e6b 5f6f           chunk_o
-000133f0: 7665 726c 6170 3d32 3030 2c0d 0a20 2020  verlap=200,..   
-00013400: 2020 2020 2020 2020 206c 656e 6774 685f           length_
-00013410: 6675 6e63 7469 6f6e 3d6c 656e 2c0d 0a20  function=len,.. 
-00013420: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
-00013430: 2020 2020 7465 7874 7320 3d20 7465 7874      texts = text
-00013440: 5f73 706c 6974 7465 722e 7370 6c69 745f  _splitter.split_
-00013450: 7465 7874 2874 6578 7429 0d0a 2020 2020  text(text)..    
-00013460: 2020 2020 656d 6265 6464 696e 6773 203d      embeddings =
-00013470: 204f 7065 6e41 4945 6d62 6564 6469 6e67   OpenAIEmbedding
-00013480: 7328 290d 0a20 2020 2020 2020 2064 6f63  s()..        doc
-00013490: 7365 6172 6368 203d 2046 4149 5353 2e66  search = FAISS.f
-000134a0: 726f 6d5f 7465 7874 7328 7465 7874 732c  rom_texts(texts,
-000134b0: 2065 6d62 6564 6469 6e67 7329 0d0a 2020   embeddings)..  
-000134c0: 2020 2020 2020 646f 6373 203d 2064 6f63        docs = doc
-000134d0: 7365 6172 6368 2e73 696d 696c 6172 6974  search.similarit
-000134e0: 795f 7365 6172 6368 2871 7565 7279 290d  y_search(query).
-000134f0: 0a20 2020 2020 2020 200d 0a20 2020 2020  .        ..     
-00013500: 2020 2063 6861 696e 203d 206c 6f61 645f     chain = load_
-00013510: 7161 5f63 6861 696e 284f 7065 6e41 4928  qa_chain(OpenAI(
-00013520: 6d6f 6465 6c5f 6e61 6d65 3d6d 6f64 656c  model_name=model
-00013530: 2c20 7465 6d70 6572 6174 7572 653d 7465  , temperature=te
-00013540: 6d70 6572 6174 7572 652c 6f70 656e 6169  mperature,openai
-00013550: 5f61 7069 5f6b 6579 3d6f 7065 6e61 696b  _api_key=openaik
-00013560: 6579 292c 2063 6861 696e 5f74 7970 653d  ey), chain_type=
-00013570: 2273 7475 6666 2229 0d0a 2020 2020 2020  "stuff")..      
-00013580: 2020 7265 7320 3d20 6368 6169 6e28 7b22    res = chain({"
-00013590: 696e 7075 745f 646f 6375 6d65 6e74 7322  input_documents"
-000135a0: 3a20 646f 6373 2c20 2271 7565 7374 696f  : docs, "questio
-000135b0: 6e22 3a20 7175 6572 797d 2c20 7265 7475  n": query}, retu
-000135c0: 726e 5f6f 6e6c 795f 6f75 7470 7574 733d  rn_only_outputs=
-000135d0: 5472 7565 290d 0a0d 0a20 2020 2020 2020  True)....       
-000135e0: 2023 7265 7475 726e 207b 2270 7265 6422   #return {"pred"
-000135f0: 3a20 7265 737d 0d0a 2020 2020 2020 2020  : res}..        
-00013600: 7265 7475 726e 2072 6573 0d0a 0d0a 2323  return res....##
-00013610: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00013620: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00013630: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00013640: 2323 0d0a 6672 6f6d 2070 6466 7175 6572  ##..from pdfquer
-00013650: 7920 696d 706f 7274 2050 4446 5175 6572  y import PDFQuer
-00013660: 790d 0a69 6d70 6f72 7420 786d 6c74 6f64  y..import xmltod
-00013670: 6963 740d 0a0d 0a0d 0a64 6566 206c 6162  ict......def lab
-00013680: 656c 6669 656c 6473 2866 696c 656e 616d  elfields(filenam
-00013690: 652c 6c61 6265 6c6e 616d 652c 6163 726f  e,labelname,acro
-000136a0: 7479 7065 293a 0d0a 2020 2020 2070 6466  type):..     pdf
-000136b0: 203d 2050 4446 5175 6572 7928 6669 6c65   = PDFQuery(file
-000136c0: 6e61 6d65 290d 0a20 2020 2020 7064 662e  name)..     pdf.
-000136d0: 6c6f 6164 2829 0d0a 2020 2020 2023 4c54  load()..     #LT
-000136e0: 5465 7874 4c69 6e65 486f 7269 7a6f 6e74  TextLineHorizont
-000136f0: 616c 0d0a 2020 2020 206c 6162 656c 203d  al..     label =
-00013700: 2070 6466 2e70 7128 6163 726f 7479 7065   pdf.pq(acrotype
-00013710: 2b27 3a63 6f6e 7461 696e 7328 2227 2b6c  +':contains("'+l
-00013720: 6162 656c 6e61 6d65 202b 2027 2229 2729  abelname + '")')
-00013730: 0d0a 2020 2020 206c 6566 745f 636f 726e  ..     left_corn
-00013740: 6572 203d 2066 6c6f 6174 286c 6162 656c  er = float(label
-00013750: 2e61 7474 7228 2778 3027 2929 0d0a 2020  .attr('x0'))..  
-00013760: 2020 2062 6f74 746f 6d5f 636f 726e 6572     bottom_corner
-00013770: 203d 2066 6c6f 6174 286c 6162 656c 2e61   = float(label.a
-00013780: 7474 7228 2779 3027 2929 0d0a 2020 2020  ttr('y0'))..    
-00013790: 206e 616d 6520 3d20 7064 662e 7071 2861   name = pdf.pq(a
-000137a0: 6372 6f74 7970 6520 2b27 3a69 6e5f 6262  crotype +':in_bb
-000137b0: 6f78 2822 2573 2c20 2573 2c20 2573 2c20  ox("%s, %s, %s, 
-000137c0: 2573 2229 2720 2520 286c 6566 745f 636f  %s")' % (left_co
-000137d0: 726e 6572 2c20 626f 7474 6f6d 5f63 6f72  rner, bottom_cor
-000137e0: 6e65 722d 3330 2c20 6c65 6674 5f63 6f72  ner-30, left_cor
-000137f0: 6e65 722b 3135 302c 2062 6f74 746f 6d5f  ner+150, bottom_
-00013800: 636f 726e 6572 2929 2e74 6578 7428 290d  corner)).text().
-00013810: 0a20 2020 2020 7265 7475 726e 206e 616d  .     return nam
-00013820: 650d 0a0d 0a0d 0a64 6566 2065 7874 7261  e......def extra
-00013830: 6374 6669 656c 6473 2866 696c 656e 616d  ctfields(filenam
-00013840: 6529 3a0d 0a20 2020 2020 2023 7265 6164  e):..      #read
-00013850: 2074 6865 2050 4446 0d0a 2020 2020 2020   the PDF..      
-00013860: 7064 6620 3d20 5044 4651 7565 7279 2866  pdf = PDFQuery(f
-00013870: 696c 656e 616d 6529 0d0a 2020 2020 2020  ilename)..      
-00013880: 7064 662e 6c6f 6164 2829 0d0a 0d0a 2020  pdf.load()....  
-00013890: 2020 2020 236f 203d 2078 6d6c 746f 6469      #o = xmltodi
-000138a0: 6374 2e70 6172 7365 2827 3c65 3e20 3c61  ct.parse('<e> <a
-000138b0: 3e74 6578 743c 2f61 3e20 3c61 3e74 6578  >text</a> <a>tex
-000138c0: 743c 2f61 3e20 3c2f 653e 2729 0d0a 0d0a  t</a> </e>')....
-000138d0: 2020 2020 2020 2363 6f6e 7665 7274 2074        #convert t
-000138e0: 6865 2070 6466 2074 6f20 584d 4c0d 0a20  he pdf to XML.. 
-000138f0: 2020 2020 2078 6d6c 6669 6c65 3d20 6669       xmlfile= fi
-00013900: 6c65 6e61 6d65 202b 2027 2e78 6d6c 270d  lename + '.xml'.
-00013910: 0a20 2020 2020 2070 6466 2e74 7265 652e  .      pdf.tree.
-00013920: 7772 6974 6528 786d 6c66 696c 652c 2070  write(xmlfile, p
-00013930: 7265 7474 795f 7072 696e 7420 3d20 5472  retty_print = Tr
-00013940: 7565 290d 0a20 2020 2020 2077 6974 6820  ue)..      with 
-00013950: 6f70 656e 2878 6d6c 6669 6c65 2920 6173  open(xmlfile) as
-00013960: 2066 3a20 7320 3d20 662e 7265 6164 2829   f: s = f.read()
-00013970: 0d0a 0d0a 2020 2020 2020 2370 7269 6e74  ....      #print
-00013980: 2873 290d 0a20 2020 2020 206a 736f 6e62  (s)..      jsonb
-00013990: 7566 3d78 6d6c 746f 6a73 6f6e 2873 2c78  uf=xmltojson(s,x
-000139a0: 6d6c 6669 6c65 290d 0a0d 0a20 2020 2020  mlfile)....     
-000139b0: 2072 6574 7572 6e20 6a73 6f6e 6275 660d   return jsonbuf.
-000139c0: 0a20 2020 2020 200d 0a0d 0a64 6566 2078  .      ....def x
-000139d0: 6d6c 746f 6a73 6f6e 2878 6d6c 6275 6666  mltojson(xmlbuff
-000139e0: 6572 2c78 6d6c 6669 6c65 293a 0d0a 0d0a  er,xmlfile):....
-000139f0: 2020 2020 2020 6f20 3d20 786d 6c74 6f64        o = xmltod
-00013a00: 6963 742e 7061 7273 6528 786d 6c62 7566  ict.parse(xmlbuf
-00013a10: 6665 7229 0d0a 2020 2020 2020 786d 6c6a  fer)..      xmlj
-00013a20: 736f 6e3d 6a73 6f6e 2e64 756d 7073 286f  son=json.dumps(o
-00013a30: 290d 0a20 2020 2020 2023 7072 696e 7428  )..      #print(
-00013a40: 786d 6c6a 736f 6e29 0d0a 2020 2020 2020  xmljson)..      
-00013a50: 7769 7468 206f 7065 6e28 786d 6c66 696c  with open(xmlfil
-00013a60: 6520 2b20 272e 6a73 6f6e 272c 2277 2229  e + '.json',"w")
-00013a70: 2061 7320 663a 0d0a 2020 2020 2020 2020   as f:..        
-00013a80: 662e 7772 6974 6528 786d 6c6a 736f 6e29  f.write(xmljson)
-00013a90: 0d0a 0d0a 2020 2020 2020 7265 7475 726e  ....      return
-00013aa0: 2078 6d6c 6a73 6f6e 2020 0d0a 0d0a 2323   xmljson  ....##
-00013ab0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00013ac0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00013ad0: 2323 2323 2323 2323 2323 2323 230d 0a69  #############..i
-00013ae0: 6d70 6f72 7420 6561 7379 6f63 720d 0a69  mport easyocr..i
-00013af0: 6d70 6f72 7420 7370 6565 6368 5f72 6563  mport speech_rec
-00013b00: 6f67 6e69 7469 6f6e 2061 7320 7372 0d0a  ognition as sr..
-00013b10: 696d 706f 7274 206d 6f76 6965 7079 2e65  import moviepy.e
-00013b20: 6469 746f 7220 6173 206d 7065 0d0a 0d0a  ditor as mpe....
-00013b30: 6465 6620 636f 6e76 6572 7476 6964 656f  def convertvideo
-00013b40: 746f 7465 7874 2866 696c 656e 616d 6529  totext(filename)
-00013b50: 3a0d 0a20 2020 2020 2020 2023 636f 6e76  :..        #conv
-00013b60: 6572 7420 746f 2061 7564 696f 0d0a 2020  ert to audio..  
-00013b70: 2020 2020 2020 7669 6465 6f20 3d20 6d70        video = mp
-00013b80: 652e 5669 6465 6f46 696c 6543 6c69 7028  e.VideoFileClip(
-00013b90: 6669 6c65 6e61 6d65 290d 0a20 2020 2020  filename)..     
-00013ba0: 2020 2061 7564 696f 6669 6c65 3d66 696c     audiofile=fil
-00013bb0: 656e 616d 6520 2b20 222e 7761 7622 0d0a  ename + ".wav"..
-00013bc0: 2020 2020 2020 2020 0d0a 2020 2020 2020          ..      
-00013bd0: 2020 7669 6465 6f2e 6175 6469 6f2e 7772    video.audio.wr
-00013be0: 6974 655f 6175 6469 6f66 696c 6528 6175  ite_audiofile(au
-00013bf0: 6469 6f66 696c 6529 0d0a 2020 2020 2020  diofile)..      
-00013c00: 2020 7265 7375 6c74 203d 2061 7564 696f    result = audio
-00013c10: 746f 7465 7874 2861 7564 696f 6669 6c65  totext(audiofile
-00013c20: 290d 0a20 2020 2020 2020 200d 0a20 2020  )..        ..   
-00013c30: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
-00013c40: 6c74 0d0a 0d0a 6465 6620 6175 6469 6f74  lt....def audiot
-00013c50: 6f74 6578 7428 6669 6c65 6e61 6d65 293a  otext(filename):
-00013c60: 0d0a 2020 2020 2020 2020 7220 3d20 7372  ..        r = sr
-00013c70: 2e52 6563 6f67 6e69 7a65 7228 290d 0a20  .Recognizer().. 
-00013c80: 2020 2020 2020 2061 7564 696f 203d 2073         audio = s
-00013c90: 722e 4175 6469 6f46 696c 6528 6669 6c65  r.AudioFile(file
-00013ca0: 6e61 6d65 290d 0a20 2020 2020 2020 2077  name)..        w
-00013cb0: 6974 6820 6175 6469 6f20 6173 2073 6f75  ith audio as sou
-00013cc0: 7263 653a 0d0a 2020 2020 2020 2020 2020  rce:..          
-00013cd0: 6175 6469 6f5f 6669 6c65 203d 2072 2e72  audio_file = r.r
-00013ce0: 6563 6f72 6428 736f 7572 6365 290d 0a20  ecord(source).. 
-00013cf0: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-00013d00: 722e 7265 636f 676e 697a 655f 676f 6f67  r.recognize_goog
-00013d10: 6c65 2861 7564 696f 5f66 696c 6529 0d0a  le(audio_file)..
-00013d20: 2020 2020 2020 2020 7370 6565 6368 6669          speechfi
-00013d30: 6c65 203d 2066 696c 656e 616d 6520 2b20  le = filename + 
-00013d40: 272e 7370 6565 6368 2e74 7874 270d 0a20  '.speech.txt'.. 
-00013d50: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
-00013d60: 2866 696c 656e 616d 6520 2b20 272e 7370  (filename + '.sp
-00013d70: 6565 6368 2e74 7874 272c 6d6f 6465 203d  eech.txt',mode =
-00013d80: 2777 2729 2061 7320 6669 6c65 3a20 0d0a  'w') as file: ..
-00013d90: 2020 2020 2020 2020 2020 2066 696c 652e             file.
-00013da0: 7772 6974 6528 7265 7375 6c74 290d 0a0d  write(result)...
-00013db0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00013dc0: 7265 7375 6c74 2020 200d 0a0d 0a0d 0a64  result   ......d
-00013dd0: 6566 2064 6f6f 6372 6d61 696e 2866 696c  ef doocrmain(fil
-00013de0: 656e 616d 6529 3a0d 0a0d 0a20 2020 2072  ename):....    r
-00013df0: 6561 6465 7220 3d20 6561 7379 6f63 722e  eader = easyocr.
-00013e00: 5265 6164 6572 285b 2765 6e27 5d29 2020  Reader(['en'])  
-00013e10: 200d 0a20 2020 2062 6f75 6e64 203d 2072   ..    bound = r
-00013e20: 6561 6465 722e 7265 6164 7465 7874 2866  eader.readtext(f
-00013e30: 696c 656e 616d 6529 0d0a 2020 2020 7265  ilename)..    re
-00013e40: 7475 726e 2062 6f75 6e64 0d0a 2020 2020  turn bound..    
-00013e50: 0d0a 2366 696c 656e 616d 653d 2774 6573  ..#filename='tes
-00013e60: 742d 7461 782e 7064 6627 2020 2020 200d  t-tax.pdf'     .
-00013e70: 0a23 7064 666a 736f 6e3d 6578 7472 6163  .#pdfjson=extrac
-00013e80: 7466 6965 6c64 7328 6669 6c65 6e61 6d65  tfields(filename
-00013e90: 290d 0a23 6e61 6d65 7465 7874 3d6c 6162  )..#nametext=lab
-00013ea0: 656c 6669 656c 6473 2866 696c 656e 616d  elfields(filenam
-00013eb0: 652c 2242 7573 696e 6573 7320 6e75 6d62  e,"Business numb
-00013ec0: 6572 222c 224c 5454 6578 744c 696e 6548  er","LTTextLineH
-00013ed0: 6f72 697a 6f6e 7461 6c22 290d 0a23 7072  orizontal")..#pr
-00013ee0: 696e 7428 6e61 6d65 7465 7874 290d 0a0d  int(nametext)...
-00013ef0: 0a                                       .
+000113b0: 0d0a 2020 2020 7374 7077 7264 203d 2020  ..    stpwrd =  
+000113c0: 7374 6f70 776f 7264 732e 776f 7264 7328  stopwords.words(
+000113d0: 2765 6e67 6c69 7368 2729 0d0a 2020 2020  'english')..    
+000113e0: 6e65 775f 7374 6f70 776f 7264 7320 3d20  new_stopwords = 
+000113f0: 5b22 6e65 6564 222c 2022 756e 666f 7274  ["need", "unfort
+00011400: 756e 6174 656c 7922 2c20 2274 6f22 2c20  unately", "to", 
+00011410: 226f 6e22 2c20 2264 6169 6c79 222c 2022  "on", "daily", "
+00011420: 7461 6b65 222c 0d0a 2020 2020 2020 2020  take",..        
+00011430: 2020 2020 2020 2020 2020 2020 2022 7461               "ta
+00011440: 6b65 6e22 2c22 6164 6472 6573 7369 6e67  ken","addressing
+00011450: 222c 2273 6f6f 6e65 7222 2c22 7261 7468  ","sooner","rath
+00011460: 6572 222c 226d 616b 6522 2c22 6c61 7465  er","make","late
+00011470: 7222 2c0d 0a20 2020 2020 2020 2020 2020  r",..           
+00011480: 2020 2020 2020 2020 2020 2273 6f6f 6e65            "soone
+00011490: 7222 2c22 7375 6d6d 6172 7922 2c22 6c65  r","summary","le
+000114a0: 6176 6522 2c22 6576 6572 7922 2c22 696e  ave","every","in
+000114b0: 7465 6e64 222c 2266 696e 616c 6c79 222c  tend","finally",
+000114c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000114d0: 2020 2020 2020 2022 656e 7469 7265 6c79         "entirely
+000114e0: 222c 2265 7665 6e22 2c22 656e 7375 7265  ","even","ensure
+000114f0: 222c 2261 6c73 6f22 2c22 6166 6665 6374  ","also","affect
+00011500: 222c 2261 6666 6563 7469 6e67 222c 0d0a  ","affecting",..
+00011510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011520: 2020 2020 2022 6275 7369 6e65 7373 222c       "business",
+00011530: 2263 6c61 7373 222c 2263 6f6d 7061 6e79  "class","company
+00011540: 222c 2261 6c73 6f22 2c22 7965 6172 222c  ","also","year",
+00011550: 2275 7369 6e67 222c 0d0a 2020 2020 2020  "using",..      
+00011560: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00011570: 6973 7375 6564 222c 2273 7065 6369 6669  issued","specifi
+00011580: 6322 2c22 7370 6563 6966 6963 616c 6c79  c","specifically
+00011590: 222c 2272 6561 736f 6e22 2c22 7265 616c  ","reason","real
+000115a0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+000115b0: 2020 2020 2020 2020 2022 7072 6f6a 6563           "projec
+000115c0: 7422 2c22 7061 7274 6963 756c 6172 6c79  t","particularly
+000115d0: 222c 2270 6172 7469 6375 6c61 7222 2c22  ","particular","
+000115e0: 6d61 7474 6572 222c 226d 6169 6e22 2c0d  matter","main",.
+000115f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011600: 2020 2020 2020 226c 6973 7465 6422 2c22        "listed","
+00011610: 636f 6d65 222c 2263 6f6d 7061 6e79 222c  come","company",
+00011620: 2263 6f75 6c64 222c 2263 6f70 7922 2c22  "could","copy","
+00011630: 6669 7273 7422 2c22 6578 616d 706c 6522  first","example"
+00011640: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00011650: 2020 2020 2020 2020 2272 6561 6c22 2c22          "real","
+00011660: 6661 6374 6f72 222c 2277 656c 6c22 2c22  factor","well","
+00011670: 736f 7274 222c 2273 6f63 6961 6c22 2c22  sort","social","
+00011680: 736f 6369 616c 6c79 222c 2274 6872 6f75  socially","throu
+00011690: 6768 6f75 7422 2c0d 0a20 2020 2020 2020  ghout",..       
+000116a0: 2020 2020 2020 2020 2020 2020 2020 2272                "r
+000116b0: 6561 736f 6e22 2c22 6176 6169 6c61 626c  eason","availabl
+000116c0: 6522 2c22 6170 7072 6f61 6368 222c 2276  e","approach","v
+000116d0: 6172 7922 2c22 7479 7065 222c 2261 6372  ary","type","acr
+000116e0: 6f73 7322 2c0d 0a20 2020 2020 2020 2020  oss",..         
+000116f0: 2020 2020 2020 2020 2020 2020 2261 7661              "ava
+00011700: 696c 6162 6c65 222c 2265 7175 616c 6c79  ilable","equally
+00011710: 222c 226d 616e 6167 6572 222c 2264 6566  ","manager","def
+00011720: 696e 6974 696f 6e22 2c22 7368 6f72 7422  inition","short"
+00011730: 2c22 7265 7370 6f6e 7365 222c 0d0a 2020  ,"response",..  
+00011740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011750: 2020 2022 7061 6e65 6c22 2c22 7265 7175     "panel","requ
+00011760: 6972 6573 222c 2272 6571 7569 7269 6e67  ires","requiring
+00011770: 222c 2272 6169 7365 222c 2273 686f 7722  ","raise","show"
+00011780: 2c22 646f 6e65 222c 2261 6465 7175 6174  ,"done","adequat
+00011790: 656c 7922 2c0d 0a20 2020 2020 2020 2020  ely",..         
+000117a0: 2020 2020 2020 2020 2020 2020 2267 656e              "gen
+000117b0: 6572 6963 222c 2267 656e 6572 616c 222c  eric","general",
+000117c0: 2263 6f75 7273 6522 2c22 6170 706c 6965  "course","applie
+000117d0: 6422 2c22 7265 6c61 7465 6422 5d0d 0a20  d","related"].. 
+000117e0: 2020 2073 7470 7772 642e 6578 7465 6e64     stpwrd.extend
+000117f0: 286e 6577 5f73 746f 7077 6f72 6473 290d  (new_stopwords).
+00011800: 0a20 2020 2072 6574 7572 6e20 7374 7077  .    return stpw
+00011810: 7264 0d0a 2020 0d0a 0d0a 2020 2020 0d0a  rd..  ....    ..
+00011820: 2323 2020 2020 7769 7468 206f 7065 6e28  ##    with open(
+00011830: 2773 746f 7077 6f72 6473 2e74 7874 272c  'stopwords.txt',
+00011840: 2027 7227 2c20 656e 636f 6469 6e67 3d22   'r', encoding="
+00011850: 7574 662d 3822 2920 6173 2066 3a0d 0a23  utf-8") as f:..#
+00011860: 2320 2020 2020 2020 2073 746f 7077 6f72  #        stopwor
+00011870: 6473 203d 2066 2e72 6561 646c 696e 6573  ds = f.readlines
+00011880: 2829 0d0a 2323 2020 2020 2020 2020 7374  ()..##        st
+00011890: 6f70 5f73 6574 203d 2073 6574 286d 2e73  op_set = set(m.s
+000118a0: 7472 6970 2829 2066 6f72 206d 2069 6e20  trip() for m in 
+000118b0: 7374 6f70 776f 7264 7329 0d0a 2323 2020  stopwords)..##  
+000118c0: 2020 2020 2320 2070 7269 6e74 2866 726f      #  print(fro
+000118d0: 7a65 6e73 6574 2873 746f 705f 7365 7429  zenset(stop_set)
+000118e0: 290d 0a23 2320 2020 2020 2020 2072 6574  )..##        ret
+000118f0: 7572 6e20 6672 6f7a 656e 7365 7428 7374  urn frozenset(st
+00011900: 6f70 5f73 6574 290d 0a0d 0a64 6566 2073  op_set)....def s
+00011910: 6372 6170 6577 6562 2874 6865 7572 6c29  crapeweb(theurl)
+00011920: 3a0d 0a20 2020 2073 6372 6170 6564 5f64  :..    scraped_d
+00011930: 6174 6120 3d20 7572 6c6c 6962 2e72 6571  ata = urllib.req
+00011940: 7565 7374 2e75 726c 6f70 656e 2874 6865  uest.urlopen(the
+00011950: 7572 6c29 2020 0d0a 2020 2020 6172 7469  url)  ..    arti
+00011960: 636c 6520 3d20 7363 7261 7065 645f 6461  cle = scraped_da
+00011970: 7461 2e72 6561 6428 290d 0a0d 0a20 2020  ta.read()....   
+00011980: 2070 6172 7365 645f 6172 7469 636c 6520   parsed_article 
+00011990: 3d20 6273 2e42 6561 7574 6966 756c 536f  = bs.BeautifulSo
+000119a0: 7570 2861 7274 6963 6c65 2c27 6c78 6d6c  up(article,'lxml
+000119b0: 2729 0d0a 0d0a 2020 2020 7061 7261 6772  ')....    paragr
+000119c0: 6170 6873 203d 2070 6172 7365 645f 6172  aphs = parsed_ar
+000119d0: 7469 636c 652e 6669 6e64 5f61 6c6c 2827  ticle.find_all('
+000119e0: 7027 290d 0a0d 0a20 2020 2061 7274 6963  p')....    artic
+000119f0: 6c65 5f74 6578 7420 3d20 2222 0d0a 0d0a  le_text = ""....
+00011a00: 2020 2020 666f 7220 7020 696e 2070 6172      for p in par
+00011a10: 6167 7261 7068 733a 2020 0d0a 2020 2020  agraphs:  ..    
+00011a20: 2020 2020 6172 7469 636c 655f 7465 7874      article_text
+00011a30: 202b 3d20 702e 7465 7874 0d0a 2020 2020   += p.text..    
+00011a40: 7265 7475 726e 2061 7274 6963 6c65 5f74  return article_t
+00011a50: 6578 7420 0d0a 0d0a 6465 6620 636f 6e76  ext ....def conv
+00011a60: 6572 7474 6f6c 6f77 6572 6361 7365 2864  erttolowercase(d
+00011a70: 662c 636f 6c29 3a0d 0a20 2020 2020 2064  f,col):..      d
+00011a80: 665b 636f 6c5d 203d 2064 665b 636f 6c5d  f[col] = df[col]
+00011a90: 2e61 7070 6c79 286c 616d 6264 6120 783a  .apply(lambda x:
+00011aa0: 2022 2022 2e6a 6f69 6e28 782e 6c6f 7765   " ".join(x.lowe
+00011ab0: 7228 2920 666f 7220 7820 696e 2078 2e73  r() for x in x.s
+00011ac0: 706c 6974 2829 2929 0d0a 2020 2020 2020  plit()))..      
+00011ad0: 7265 7475 726e 2064 660d 0a20 2020 200d  return df..    .
+00011ae0: 0a64 6566 2072 656d 6f76 6570 756e 6374  .def removepunct
+00011af0: 7561 7469 6f6e 2864 662c 636f 6c29 3a0d  uation(df,col):.
+00011b00: 0a20 2020 2020 2064 665b 636f 6c5d 203d  .      df[col] =
+00011b10: 2064 665b 636f 6c5d 2e73 7472 2e72 6570   df[col].str.rep
+00011b20: 6c61 6365 2827 5b5e 5c77 5c73 5d27 2c27  lace('[^\w\s]','
+00011b30: 2729 0d0a 2020 2020 2020 7265 7475 726e  ')..      return
+00011b40: 2064 660d 0a0d 0a64 6566 2072 656d 6f76   df....def remov
+00011b50: 6573 746f 7077 6f72 6473 2864 662c 636f  estopwords(df,co
+00011b60: 6c29 3a0d 0a20 2020 2020 2073 746f 7020  l):..      stop 
+00011b70: 3d20 7374 6f70 776f 7264 732e 776f 7264  = stopwords.word
+00011b80: 7328 2765 6e67 6c69 7368 2729 0d0a 2020  s('english')..  
+00011b90: 2020 2020 6466 5b63 6f6c 5d20 3d20 6466      df[col] = df
+00011ba0: 5b63 6f6c 5d2e 6170 706c 7928 6c61 6d62  [col].apply(lamb
+00011bb0: 6461 2078 3a20 2220 222e 6a6f 696e 2878  da x: " ".join(x
+00011bc0: 2066 6f72 2078 2069 6e20 782e 7370 6c69   for x in x.spli
+00011bd0: 7428 2920 6966 2078 206e 6f74 2069 6e20  t() if x not in 
+00011be0: 7374 6f70 2929 0d0a 2020 2020 2020 7265  stop))..      re
+00011bf0: 7475 726e 2064 660d 0a0d 0a64 6566 2072  turn df....def r
+00011c00: 656d 6f76 6563 6f6d 6d6f 6e77 6f72 6473  emovecommonwords
+00011c10: 2864 662c 636f 6c29 3a0d 0a20 2020 2020  (df,col):..     
+00011c20: 2066 7265 7120 3d20 7064 2e53 6572 6965   freq = pd.Serie
+00011c30: 7328 2720 272e 6a6f 696e 2864 665b 636f  s(' '.join(df[co
+00011c40: 6c5d 292e 7370 6c69 7428 2929 2e76 616c  l]).split()).val
+00011c50: 7565 5f63 6f75 6e74 7328 295b 3a31 305d  ue_counts()[:10]
+00011c60: 0d0a 2020 2020 2020 6672 6571 203d 206c  ..      freq = l
+00011c70: 6973 7428 6672 6571 2e69 6e64 6578 290d  ist(freq.index).
+00011c80: 0a20 2020 2020 2064 665b 636f 6c5d 203d  .      df[col] =
+00011c90: 2064 665b 636f 6c5d 2e61 7070 6c79 286c   df[col].apply(l
+00011ca0: 616d 6264 6120 783a 2022 2022 2e6a 6f69  ambda x: " ".joi
+00011cb0: 6e28 7820 666f 7220 7820 696e 2078 2e73  n(x for x in x.s
+00011cc0: 706c 6974 2829 2069 6620 7820 6e6f 7420  plit() if x not 
+00011cd0: 696e 2066 7265 7129 290d 0a20 2020 2020  in freq))..     
+00011ce0: 2072 6574 7572 6e20 6466 0d0a 0d0a 6465   return df....de
+00011cf0: 6620 7265 6d6f 7665 7261 7265 776f 7264  f removerareword
+00011d00: 7328 6466 2c63 6f6c 293a 0d0a 2020 2020  s(df,col):..    
+00011d10: 2020 6672 6571 203d 2070 642e 5365 7269    freq = pd.Seri
+00011d20: 6573 2827 2027 2e6a 6f69 6e28 6466 5b63  es(' '.join(df[c
+00011d30: 6f6c 5d29 2e73 706c 6974 2829 292e 7661  ol]).split()).va
+00011d40: 6c75 655f 636f 756e 7473 2829 5b2d 3130  lue_counts()[-10
+00011d50: 3a5d 0d0a 2020 2020 2020 6672 6571 203d  :]..      freq =
+00011d60: 206c 6973 7428 6672 6571 2e69 6e64 6578   list(freq.index
+00011d70: 290d 0a20 2020 2020 2064 665b 636f 6c5d  )..      df[col]
+00011d80: 203d 2064 665b 636f 6c5d 2e61 7070 6c79   = df[col].apply
+00011d90: 286c 616d 6264 6120 783a 2022 2022 2e6a  (lambda x: " ".j
+00011da0: 6f69 6e28 7820 666f 7220 7820 696e 2078  oin(x for x in x
+00011db0: 2e73 706c 6974 2829 2069 6620 7820 6e6f  .split() if x no
+00011dc0: 7420 696e 2066 7265 7129 290d 0a20 2020  t in freq))..   
+00011dd0: 2020 2072 6574 7572 6e20 6466 0d0a 0d0a     return df....
+00011de0: 6465 6620 636f 7272 6563 7473 7065 6c6c  def correctspell
+00011df0: 696e 6728 6466 2c63 6f6c 293a 0d0a 2020  ing(df,col):..  
+00011e00: 2020 2020 6466 5b63 6f6c 5d5b 3a35 5d2e      df[col][:5].
+00011e10: 6170 706c 7928 6c61 6d62 6461 2078 3a20  apply(lambda x: 
+00011e20: 7374 7228 5465 7874 426c 6f62 2878 292e  str(TextBlob(x).
+00011e30: 636f 7272 6563 7428 2929 290d 0a20 2020  correct()))..   
+00011e40: 2020 2072 6574 7572 6e20 6466 0d0a 0d0a     return df....
+00011e50: 6465 6620 6c65 6d6d 6174 697a 6174 696f  def lemmatizatio
+00011e60: 6e28 6466 2c63 6f6c 293a 0d0a 2020 2020  n(df,col):..    
+00011e70: 2020 6466 5b63 6f6c 5d20 3d20 6466 5b63    df[col] = df[c
+00011e80: 6f6c 5d2e 6170 706c 7928 6c61 6d62 6461  ol].apply(lambda
+00011e90: 2078 3a20 2220 222e 6a6f 696e 285b 576f   x: " ".join([Wo
+00011ea0: 7264 2877 6f72 6429 2e6c 656d 6d61 7469  rd(word).lemmati
+00011eb0: 7a65 2829 2066 6f72 2077 6f72 6420 696e  ze() for word in
+00011ec0: 2078 2e73 706c 6974 2829 5d29 290d 0a20   x.split()])).. 
+00011ed0: 2020 2020 2072 6574 7572 6e20 6466 0d0a       return df..
+00011ee0: 0d0a 6465 6620 7472 6169 6e76 6563 7428  ..def trainvect(
+00011ef0: 6376 2c74 626f 772c 6466 2c63 6f6c 2c6d  cv,tbow,df,col,m
+00011f00: 6178 6b65 7977 6f72 6473 293a 0d0a 2020  axkeywords):..  
+00011f10: 2020 2020 7465 7874 3d64 665b 636f 6c5d      text=df[col]
+00011f20: 2e74 6f6c 6973 7428 290d 0a20 2020 2020  .tolist()..     
+00011f30: 2074 6669 6466 203d 2054 6669 6466 5472   tfidf = TfidfTr
+00011f40: 616e 7366 6f72 6d65 7228 736d 6f6f 7468  ansformer(smooth
+00011f50: 5f69 6466 3d54 7275 652c 7573 655f 6964  _idf=True,use_id
+00011f60: 663d 5472 7565 290d 0a20 2020 2020 2074  f=True)..      t
+00011f70: 6669 6466 2e66 6974 2874 626f 7729 0d0a  fidf.fit(tbow)..
+00011f80: 2020 2020 2020 7466 5f69 6466 5f76 6563        tf_idf_vec
+00011f90: 746f 723d 7466 6964 662e 7472 616e 7366  tor=tfidf.transf
+00011fa0: 6f72 6d28 6376 2e74 7261 6e73 666f 726d  orm(cv.transform
+00011fb0: 2874 6578 7429 290d 0a20 2020 2020 2073  (text))..      s
+00011fc0: 6f72 7465 6469 7465 6d73 3d73 6f72 745f  orteditems=sort_
+00011fd0: 636f 6f28 7466 5f69 6466 5f76 6563 746f  coo(tf_idf_vecto
+00011fe0: 722e 746f 636f 6f28 2929 0d0a 2020 2020  r.tocoo())..    
+00011ff0: 2020 6665 6174 7572 656e 616d 6573 3d63    featurenames=c
+00012000: 762e 6765 745f 6665 6174 7572 655f 6e61  v.get_feature_na
+00012010: 6d65 735f 6f75 7428 290d 0a20 2020 2020  mes_out()..     
+00012020: 206b 6579 776f 7264 733d 6578 7472 6163   keywords=extrac
+00012030: 745f 746f 706e 5f66 726f 6d5f 7665 6374  t_topn_from_vect
+00012040: 6f72 2866 6561 7475 7265 6e61 6d65 732c  or(featurenames,
+00012050: 736f 7274 6564 6974 656d 732c 6d61 786b  sorteditems,maxk
+00012060: 6579 776f 7264 7329 0d0a 2020 2020 2020  eywords)..      
+00012070: 6b65 7977 6f72 6473 3d6a 736f 6e2e 6475  keywords=json.du
+00012080: 6d70 7328 6b65 7977 6f72 6473 290d 0a20  mps(keywords).. 
+00012090: 2020 2020 2320 7072 696e 7428 6b65 7977      # print(keyw
+000120a0: 6f72 6473 290d 0a20 2020 2020 2072 6574  ords)..      ret
+000120b0: 7572 6e20 6b65 7977 6f72 6473 0d0a 0d0a  urn keywords....
+000120c0: 6465 6620 7472 6169 6e62 6f77 2864 662c  def trainbow(df,
+000120d0: 636f 6c29 3a0d 0a20 2020 2020 206d 796c  col):..      myl
+000120e0: 6973 743d 6466 5b63 6f6c 5d2e 746f 6c69  ist=df[col].toli
+000120f0: 7374 2829 0d0a 2020 2020 2020 7374 6f70  st()..      stop
+00012100: 776f 7264 733d 6765 745f 7374 6f70 5f77  words=get_stop_w
+00012110: 6f72 6473 2829 0d0a 2020 2020 2020 6376  ords()..      cv
+00012120: 203d 2043 6f75 6e74 5665 6374 6f72 697a   = CountVectoriz
+00012130: 6572 2873 746f 705f 776f 7264 733d 7374  er(stop_words=st
+00012140: 6f70 776f 7264 7329 0d0a 2020 2020 2020  opwords)..      
+00012150: 7472 6169 6e5f 626f 7720 3d20 6376 2e66  train_bow = cv.f
+00012160: 6974 5f74 7261 6e73 666f 726d 286d 796c  it_transform(myl
+00012170: 6973 7429 0d0a 2020 2020 2020 2370 7269  ist)..      #pri
+00012180: 6e74 286c 6973 7428 6376 2e76 6f63 6162  nt(list(cv.vocab
+00012190: 756c 6172 795f 2e6b 6579 7328 2929 290d  ulary_.keys())).
+000121a0: 0a20 2020 2020 2072 6574 7572 6e20 6376  .      return cv
+000121b0: 2c74 7261 696e 5f62 6f77 0d0a 0d0a 200d  ,train_bow.... .
+000121c0: 0a64 6566 2073 6f72 745f 636f 6f28 636f  .def sort_coo(co
+000121d0: 6f5f 6d61 7472 6978 293a 0d0a 2020 2020  o_matrix):..    
+000121e0: 7475 706c 6573 203d 207a 6970 2863 6f6f  tuples = zip(coo
+000121f0: 5f6d 6174 7269 782e 636f 6c2c 2063 6f6f  _matrix.col, coo
+00012200: 5f6d 6174 7269 782e 6461 7461 290d 0a20  _matrix.data).. 
+00012210: 2020 2072 6574 7572 6e20 736f 7274 6564     return sorted
+00012220: 2874 7570 6c65 732c 206b 6579 3d6c 616d  (tuples, key=lam
+00012230: 6264 6120 783a 2028 785b 315d 2c20 785b  bda x: (x[1], x[
+00012240: 305d 292c 2072 6576 6572 7365 3d54 7275  0]), reverse=Tru
+00012250: 6529 0d0a 0d0a 6465 6620 6578 7472 6163  e)....def extrac
+00012260: 745f 746f 706e 5f66 726f 6d5f 7665 6374  t_topn_from_vect
+00012270: 6f72 2866 6561 7475 7265 5f6e 616d 6573  or(feature_names
+00012280: 2c20 736f 7274 6564 5f69 7465 6d73 2c20  , sorted_items, 
+00012290: 746f 706e 3d31 3029 3a0d 0a20 2020 2022  topn=10):..    "
+000122a0: 2222 6765 7420 7468 6520 6665 6174 7572  ""get the featur
+000122b0: 6520 6e61 6d65 7320 616e 6420 7466 2d69  e names and tf-i
+000122c0: 6466 2073 636f 7265 206f 6620 746f 7020  df score of top 
+000122d0: 6e20 6974 656d 7322 2222 0d0a 2020 2020  n items"""..    
+000122e0: 0d0a 2020 2020 2375 7365 206f 6e6c 7920  ..    #use only 
+000122f0: 746f 706e 2069 7465 6d73 2066 726f 6d20  topn items from 
+00012300: 7665 6374 6f72 0d0a 2020 2020 736f 7274  vector..    sort
+00012310: 6564 5f69 7465 6d73 203d 2073 6f72 7465  ed_items = sorte
+00012320: 645f 6974 656d 735b 3a74 6f70 6e5d 0d0a  d_items[:topn]..
+00012330: 0d0a 2020 2020 7363 6f72 655f 7661 6c73  ..    score_vals
+00012340: 203d 205b 5d0d 0a20 2020 2066 6561 7475   = []..    featu
+00012350: 7265 5f76 616c 7320 3d20 5b5d 0d0a 0d0a  re_vals = []....
+00012360: 2020 2020 666f 7220 6964 782c 2073 636f      for idx, sco
+00012370: 7265 2069 6e20 736f 7274 6564 5f69 7465  re in sorted_ite
+00012380: 6d73 3a20 2020 2020 2020 200d 0a20 2020  ms:        ..   
+00012390: 2020 2020 2020 2066 6e61 6d65 203d 2066         fname = f
+000123a0: 6561 7475 7265 5f6e 616d 6573 5b69 6478  eature_names[idx
+000123b0: 5d0d 0a20 2020 2020 2020 2020 2069 6620  ]..          if 
+000123c0: 6c65 6e28 666e 616d 6529 3e33 3a0d 0a20  len(fname)>3:.. 
+000123d0: 2020 2020 2020 2023 6b65 6570 2074 7261         #keep tra
+000123e0: 636b 206f 6620 6665 6174 7572 6520 6e61  ck of feature na
+000123f0: 6d65 2061 6e64 2069 7473 2063 6f72 7265  me and its corre
+00012400: 7370 6f6e 6469 6e67 2073 636f 7265 0d0a  sponding score..
+00012410: 2020 2020 2020 2020 2020 2020 7363 6f72              scor
+00012420: 655f 7661 6c73 2e61 7070 656e 6428 726f  e_vals.append(ro
+00012430: 756e 6428 7363 6f72 652c 2033 2929 0d0a  und(score, 3))..
+00012440: 2020 2020 2020 2020 2020 2020 6665 6174              feat
+00012450: 7572 655f 7661 6c73 2e61 7070 656e 6428  ure_vals.append(
+00012460: 6665 6174 7572 655f 6e61 6d65 735b 6964  feature_names[id
+00012470: 785d 290d 0a0d 0a20 2020 2023 6372 6561  x])....    #crea
+00012480: 7465 2061 2074 7570 6c65 7320 6f66 2066  te a tuples of f
+00012490: 6561 7475 7265 2c73 636f 7265 0d0a 2020  eature,score..  
+000124a0: 2020 2372 6573 756c 7473 203d 207a 6970    #results = zip
+000124b0: 2866 6561 7475 7265 5f76 616c 732c 7363  (feature_vals,sc
+000124c0: 6f72 655f 7661 6c73 290d 0a20 2020 2072  ore_vals)..    r
+000124d0: 6573 756c 7473 3d20 7b7d 0d0a 2020 2020  esults= {}..    
+000124e0: 666f 7220 6964 7820 696e 2072 616e 6765  for idx in range
+000124f0: 286c 656e 2866 6561 7475 7265 5f76 616c  (len(feature_val
+00012500: 7329 293a 0d0a 2020 2020 2020 2020 7265  s)):..        re
+00012510: 7375 6c74 735b 6665 6174 7572 655f 7661  sults[feature_va
+00012520: 6c73 5b69 6478 5d5d 3d73 636f 7265 5f76  ls[idx]]=score_v
+00012530: 616c 735b 6964 785d 0d0a 2020 2020 0d0a  als[idx]..    ..
+00012540: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
+00012550: 7473 0d0a 0d0a 6465 6620 6765 746b 6579  ts....def getkey
+00012560: 776f 7264 7328 6d79 7465 7874 2c6d 6178  words(mytext,max
+00012570: 6b65 7977 6f72 6473 293a 0d0a 2020 2020  keywords):..    
+00012580: 723d 5261 6b65 286d 6178 5f6c 656e 6774  r=Rake(max_lengt
+00012590: 683d 3130 290d 0a20 2020 2072 203d 2052  h=10)..    r = R
+000125a0: 616b 6528 7261 6e6b 696e 675f 6d65 7472  ake(ranking_metr
+000125b0: 6963 3d4d 6574 7269 632e 4445 4752 4545  ic=Metric.DEGREE
+000125c0: 5f54 4f5f 4652 4551 5545 4e43 595f 5241  _TO_FREQUENCY_RA
+000125d0: 5449 4f29 0d0a 2020 2020 2372 203d 2052  TIO)..    #r = R
+000125e0: 616b 6528 7261 6e6b 696e 675f 6d65 7472  ake(ranking_metr
+000125f0: 6963 3d4d 6574 7269 632e 574f 5244 5f44  ic=Metric.WORD_D
+00012600: 4547 5245 4529 0d0a 2020 2020 2372 203d  EGREE)..    #r =
+00012610: 2052 616b 6528 7261 6e6b 696e 675f 6d65   Rake(ranking_me
+00012620: 7472 6963 3d4d 6574 7269 632e 574f 5244  tric=Metric.WORD
+00012630: 5f46 5245 5155 454e 4359 290d 0a20 2020  _FREQUENCY)..   
+00012640: 2064 3d7b 2769 6e70 7574 273a 5b6d 7974   d={'input':[myt
+00012650: 6578 745d 7d0d 0a20 2020 2064 6620 3d20  ext]}..    df = 
+00012660: 7064 2e44 6174 6146 7261 6d65 2864 290d  pd.DataFrame(d).
+00012670: 0a20 2020 2064 663d 636f 6e76 6572 7474  .    df=convertt
+00012680: 6f6c 6f77 6572 6361 7365 2864 662c 2769  olowercase(df,'i
+00012690: 6e70 7574 2729 0d0a 2020 2020 6466 3d72  nput')..    df=r
+000126a0: 656d 6f76 6570 756e 6374 7561 7469 6f6e  emovepunctuation
+000126b0: 2864 662c 2769 6e70 7574 2729 0d0a 2020  (df,'input')..  
+000126c0: 2020 6466 3d72 656d 6f76 6573 746f 7077    df=removestopw
+000126d0: 6f72 6473 2864 662c 2769 6e70 7574 2729  ords(df,'input')
+000126e0: 0d0a 2020 2020 6466 3d72 656d 6f76 6563  ..    df=removec
+000126f0: 6f6d 6d6f 6e77 6f72 6473 2864 662c 2769  ommonwords(df,'i
+00012700: 6e70 7574 2729 0d0a 2020 2020 6466 3d72  nput')..    df=r
+00012710: 656d 6f76 6572 6172 6577 6f72 6473 2864  emoverarewords(d
+00012720: 662c 2769 6e70 7574 2729 0d0a 2020 2020  f,'input')..    
+00012730: 6466 3d63 6f72 7265 6374 7370 656c 6c69  df=correctspelli
+00012740: 6e67 2864 662c 2769 6e70 7574 2729 0d0a  ng(df,'input')..
+00012750: 2020 2020 6466 3d6c 656d 6d61 7469 7a61      df=lemmatiza
+00012760: 7469 6f6e 2864 662c 2769 6e70 7574 2729  tion(df,'input')
+00012770: 0d0a 2020 2020 6d79 7465 7874 3d64 665b  ..    mytext=df[
+00012780: 2769 6e70 7574 275d 5b30 5d0d 0a20 2020  'input'][0]..   
+00012790: 2063 762c 7477 3d74 7261 696e 626f 7728   cv,tw=trainbow(
+000127a0: 6466 2c27 696e 7075 7427 290d 0a20 2020  df,'input')..   
+000127b0: 206b 6579 776f 7264 733d 7472 6169 6e76   keywords=trainv
+000127c0: 6563 7428 6376 2c74 772c 6466 2c27 696e  ect(cv,tw,df,'in
+000127d0: 7075 7427 2c6d 6178 6b65 7977 6f72 6473  put',maxkeywords
+000127e0: 290d 0a0d 0a20 2020 200d 0a20 2020 206b  )....    ..    k
+000127f0: 6579 6275 6620 3d20 2222 0d0a 2020 2020  eybuf = ""..    
+00012800: 6b6a 736f 6e20 3d20 6a73 6f6e 2e6c 6f61  kjson = json.loa
+00012810: 6473 286b 6579 776f 7264 7329 0d0a 2020  ds(keywords)..  
+00012820: 2020 666f 7220 6b65 792c 2076 616c 7565    for key, value
+00012830: 2069 6e20 6b6a 736f 6e2e 6974 656d 7328   in kjson.items(
+00012840: 293a 0d0a 2020 2020 2020 2020 6b65 7962  ):..        keyb
+00012850: 7566 203d 206b 6579 6275 6620 2b20 6b65  uf = keybuf + ke
+00012860: 7920 2b22 2c22 202b 2073 7472 2876 616c  y +"," + str(val
+00012870: 7565 2920 2b20 223a 220d 0a20 2020 206b  ue) + ":"..    k
+00012880: 6579 6275 6620 3d20 6b65 7962 7566 5b3a  eybuf = keybuf[:
+00012890: 2d31 5d0d 0a0d 0a20 2020 2072 6574 7572  -1]....    retur
+000128a0: 6e20 6b65 7962 7566 0d0a 200d 0a64 6566  n keybuf.. ..def
+000128b0: 2064 6f73 756d 6d61 7279 2861 7274 6963   dosummary(artic
+000128c0: 6c65 5f74 6578 742c 6929 3a0d 0a0d 0a0d  le_text,i):.....
+000128d0: 0a20 2020 2061 7274 6963 6c65 5f74 6578  .    article_tex
+000128e0: 7420 3d20 7265 2e73 7562 2872 275c 5b5b  t = re.sub(r'\[[
+000128f0: 302d 395d 2a5c 5d27 2c20 2720 272c 2061  0-9]*\]', ' ', a
+00012900: 7274 6963 6c65 5f74 6578 7429 2020 0d0a  rticle_text)  ..
+00012910: 2020 2020 6172 7469 636c 655f 7465 7874      article_text
+00012920: 203d 2072 652e 7375 6228 7227 5c73 2b27   = re.sub(r'\s+'
+00012930: 2c20 2720 272c 2061 7274 6963 6c65 5f74  , ' ', article_t
+00012940: 6578 7429 0d0a 0d0a 2020 2020 2320 5265  ext)....    # Re
+00012950: 6d6f 7669 6e67 2073 7065 6369 616c 2063  moving special c
+00012960: 6861 7261 6374 6572 7320 616e 6420 6469  haracters and di
+00012970: 6769 7473 0d0a 2020 2020 666f 726d 6174  gits..    format
+00012980: 7465 645f 6172 7469 636c 655f 7465 7874  ted_article_text
+00012990: 203d 2072 652e 7375 6228 275b 5e61 2d7a   = re.sub('[^a-z
+000129a0: 412d 5a5d 272c 2027 2027 2c20 6172 7469  A-Z]', ' ', arti
+000129b0: 636c 655f 7465 7874 2029 2020 0d0a 2020  cle_text )  ..  
+000129c0: 2020 666f 726d 6174 7465 645f 6172 7469    formatted_arti
+000129d0: 636c 655f 7465 7874 203d 2072 652e 7375  cle_text = re.su
+000129e0: 6228 7227 5c73 2b27 2c20 2720 272c 2066  b(r'\s+', ' ', f
+000129f0: 6f72 6d61 7474 6564 5f61 7274 6963 6c65  ormatted_article
+00012a00: 5f74 6578 7429 2020 0d0a 0d0a 2020 2020  _text)  ....    
+00012a10: 7365 6e74 656e 6365 5f6c 6973 7420 3d20  sentence_list = 
+00012a20: 6e6c 746b 2e73 656e 745f 746f 6b65 6e69  nltk.sent_tokeni
+00012a30: 7a65 2861 7274 6963 6c65 5f74 6578 7429  ze(article_text)
+00012a40: 2020 0d0a 2020 2020 2370 7269 6e74 2873    ..    #print(s
+00012a50: 656e 7465 6e63 655f 6c69 7374 290d 0a0d  entence_list)...
+00012a60: 0a20 2020 2073 746f 7077 6f72 6473 203d  .    stopwords =
+00012a70: 206e 6c74 6b2e 636f 7270 7573 2e73 746f   nltk.corpus.sto
+00012a80: 7077 6f72 6473 2e77 6f72 6473 2827 656e  pwords.words('en
+00012a90: 676c 6973 6827 290d 0a0d 0a20 2020 2077  glish')....    w
+00012aa0: 6f72 645f 6672 6571 7565 6e63 6965 7320  ord_frequencies 
+00012ab0: 3d20 7b7d 2020 0d0a 2020 2020 666f 7220  = {}  ..    for 
+00012ac0: 776f 7264 2069 6e20 6e6c 746b 2e77 6f72  word in nltk.wor
+00012ad0: 645f 746f 6b65 6e69 7a65 2866 6f72 6d61  d_tokenize(forma
+00012ae0: 7474 6564 5f61 7274 6963 6c65 5f74 6578  tted_article_tex
+00012af0: 7429 3a20 200d 0a20 2020 2020 2020 2069  t):  ..        i
+00012b00: 6620 776f 7264 206e 6f74 2069 6e20 7374  f word not in st
+00012b10: 6f70 776f 7264 733a 0d0a 2020 2020 2020  opwords:..      
+00012b20: 2020 2020 2020 6966 2077 6f72 6420 6e6f        if word no
+00012b30: 7420 696e 2077 6f72 645f 6672 6571 7565  t in word_freque
+00012b40: 6e63 6965 732e 6b65 7973 2829 3a0d 0a20  ncies.keys():.. 
+00012b50: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+00012b60: 6f72 645f 6672 6571 7565 6e63 6965 735b  ord_frequencies[
+00012b70: 776f 7264 5d20 3d20 310d 0a20 2020 2020  word] = 1..     
+00012b80: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00012b90: 2020 2020 2020 2020 2020 2020 2020 776f                wo
+00012ba0: 7264 5f66 7265 7175 656e 6369 6573 5b77  rd_frequencies[w
+00012bb0: 6f72 645d 202b 3d20 310d 0a0d 0a20 2020  ord] += 1....   
+00012bc0: 206d 6178 696d 756d 5f66 7265 7175 6e63   maximum_frequnc
+00012bd0: 7920 3d20 6d61 7828 776f 7264 5f66 7265  y = max(word_fre
+00012be0: 7175 656e 6369 6573 2e76 616c 7565 7328  quencies.values(
+00012bf0: 2929 0d0a 0d0a 2020 2020 666f 7220 776f  ))....    for wo
+00012c00: 7264 2069 6e20 776f 7264 5f66 7265 7175  rd in word_frequ
+00012c10: 656e 6369 6573 2e6b 6579 7328 293a 2020  encies.keys():  
+00012c20: 0d0a 2020 2020 2020 2020 776f 7264 5f66  ..        word_f
+00012c30: 7265 7175 656e 6369 6573 5b77 6f72 645d  requencies[word]
+00012c40: 203d 2028 776f 7264 5f66 7265 7175 656e   = (word_frequen
+00012c50: 6369 6573 5b77 6f72 645d 2f6d 6178 696d  cies[word]/maxim
+00012c60: 756d 5f66 7265 7175 6e63 7929 0d0a 0d0a  um_frequncy)....
+00012c70: 2020 2020 2370 7269 6e74 2877 6f72 645f      #print(word_
+00012c80: 6672 6571 7565 6e63 6965 7329 0d0a 0d0a  frequencies)....
+00012c90: 2020 2020 7365 6e74 656e 6365 5f73 636f      sentence_sco
+00012ca0: 7265 7320 3d20 7b7d 2020 0d0a 2020 2020  res = {}  ..    
+00012cb0: 666f 7220 7365 6e74 2069 6e20 7365 6e74  for sent in sent
+00012cc0: 656e 6365 5f6c 6973 743a 2020 0d0a 2020  ence_list:  ..  
+00012cd0: 2020 2020 2020 666f 7220 776f 7264 2069        for word i
+00012ce0: 6e20 6e6c 746b 2e77 6f72 645f 746f 6b65  n nltk.word_toke
+00012cf0: 6e69 7a65 2873 656e 742e 6c6f 7765 7228  nize(sent.lower(
+00012d00: 2929 3a0d 0a20 2020 2020 2020 2020 2020  )):..           
+00012d10: 2069 6620 776f 7264 2069 6e20 776f 7264   if word in word
+00012d20: 5f66 7265 7175 656e 6369 6573 2e6b 6579  _frequencies.key
+00012d30: 7328 293a 0d0a 2020 2020 2020 2020 2020  s():..          
+00012d40: 2020 2020 2020 6966 206c 656e 2873 656e        if len(sen
+00012d50: 742e 7370 6c69 7428 2720 2729 2920 3c20  t.split(' ')) < 
+00012d60: 3235 3a0d 0a20 2020 2020 2020 2020 2020  25:..           
+00012d70: 2020 2020 2020 2020 2069 6620 7365 6e74           if sent
+00012d80: 206e 6f74 2069 6e20 7365 6e74 656e 6365   not in sentence
+00012d90: 5f73 636f 7265 732e 6b65 7973 2829 3a0d  _scores.keys():.
+00012da0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012db0: 2020 2020 2020 2020 2073 656e 7465 6e63           sentenc
+00012dc0: 655f 7363 6f72 6573 5b73 656e 745d 203d  e_scores[sent] =
+00012dd0: 2077 6f72 645f 6672 6571 7565 6e63 6965   word_frequencie
+00012de0: 735b 776f 7264 5d0d 0a20 2020 2020 2020  s[word]..       
+00012df0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00012e00: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00012e10: 2020 2020 2020 2020 2020 2020 7365 6e74              sent
+00012e20: 656e 6365 5f73 636f 7265 735b 7365 6e74  ence_scores[sent
+00012e30: 5d20 2b3d 2077 6f72 645f 6672 6571 7565  ] += word_freque
+00012e40: 6e63 6965 735b 776f 7264 5d0d 0a0d 0a20  ncies[word].... 
+00012e50: 2020 2023 7072 696e 7428 7365 6e74 656e     #print(senten
+00012e60: 6365 5f73 636f 7265 7329 0d0a 0d0a 2020  ce_scores)....  
+00012e70: 2020 7375 6d6d 6172 795f 7365 6e74 656e    summary_senten
+00012e80: 6365 7320 3d20 6865 6170 712e 6e6c 6172  ces = heapq.nlar
+00012e90: 6765 7374 2869 2c20 7365 6e74 656e 6365  gest(i, sentence
+00012ea0: 5f73 636f 7265 732c 206b 6579 3d73 656e  _scores, key=sen
+00012eb0: 7465 6e63 655f 7363 6f72 6573 2e67 6574  tence_scores.get
+00012ec0: 290d 0a20 2020 2023 7072 696e 7428 7375  )..    #print(su
+00012ed0: 6d6d 6172 795f 7365 6e74 656e 6365 7329  mmary_sentences)
+00012ee0: 0d0a 2020 2020 7375 6d6d 6172 7920 3d20  ..    summary = 
+00012ef0: 2720 272e 6a6f 696e 2873 756d 6d61 7279  ' '.join(summary
+00012f00: 5f73 656e 7465 6e63 6573 290d 0a20 2020  _sentences)..   
+00012f10: 2023 7072 696e 7428 2241 4920 5375 6d6d   #print("AI Summ
+00012f20: 6172 7922 290d 0a20 2020 2072 6574 7572  ary")..    retur
+00012f30: 6e20 7375 6d6d 6172 790d 0a0d 0a64 6566  n summary....def
+00012f40: 2073 7461 7274 7375 6d6d 6172 7928 6172   startsummary(ar
+00012f50: 7469 636c 655f 7465 7874 2c66 7661 6c75  ticle_text,fvalu
+00012f60: 652c 6d61 786b 6579 776f 7264 7329 3a0d  e,maxkeywords):.
+00012f70: 0a20 2020 2020 200d 0a20 2320 7472 793a  .      .. # try:
+00012f80: 0d0a 2020 206f 7269 6769 6e61 6c77 6f72  ..   originalwor
+00012f90: 6473 203d 206c 656e 2861 7274 6963 6c65  ds = len(article
+00012fa0: 5f74 6578 742e 7370 6c69 7428 2220 2229  _text.split(" ")
+00012fb0: 290d 0a0d 0a20 2020 666f 7220 6920 696e  )....   for i in
+00012fc0: 2072 616e 6765 2831 2c31 3030 3030 293a   range(1,10000):
+00012fd0: 0d0a 2020 2020 2073 756d 6d61 7279 3d64  ..     summary=d
+00012fe0: 6f73 756d 6d61 7279 2861 7274 6963 6c65  osummary(article
+00012ff0: 5f74 6578 742c 6929 0d0a 2020 2020 2072  _text,i)..     r
+00013000: 6573 203d 206c 656e 2873 756d 6d61 7279  es = len(summary
+00013010: 2e73 706c 6974 2829 290d 0a20 2020 2020  .split())..     
+00013020: 6966 2072 6573 203e 3d20 6676 616c 7565  if res >= fvalue
+00013030: 3a0d 0a20 2020 2020 2020 2020 6272 6561  :..         brea
+00013040: 6b0d 0a0d 0a20 2020 7375 6d6d 6172 7920  k....   summary 
+00013050: 3d20 2072 652e 7375 6228 225c 5c5c 5c78  =  re.sub("\\\\x
+00013060: 5b61 2d66 302d 395d 5b61 2d66 302d 395d  [a-f0-9][a-f0-9]
+00013070: 222c 2022 2022 2c73 756d 6d61 7279 290d  ", " ",summary).
+00013080: 0a20 2020 7375 6d6d 6172 7920 3d20 7265  .   summary = re
+00013090: 2e73 7562 2822 5c5c 7865 325c 5c78 3830  .sub("\\xe2\\x80
+000130a0: 5c5c 7839 3922 2c22 2722 2c20 7375 6d6d  \\x99","'", summ
+000130b0: 6172 7929 0d0a 2020 2073 756d 6d61 7279  ary)..   summary
+000130c0: 3d73 756d 6d61 7279 2e72 6570 6c61 6365  =summary.replace
+000130d0: 2822 5c5c 7865 325c 5c78 3830 5c5c 7839  ("\\xe2\\x80\\x9
+000130e0: 3922 2c22 2722 290d 0a20 2020 7375 6d6d  9","'")..   summ
+000130f0: 6172 793d 7375 6d6d 6172 792e 7265 706c  ary=summary.repl
+00013100: 6163 6528 225c 5c78 6532 5c5c 7838 305c  ace("\\xe2\\x80\
+00013110: 5c78 3930 222c 222d 2229 0d0a 2020 2073  \x90","-")..   s
+00013120: 756d 6d61 7279 3d73 756d 6d61 7279 2e72  ummary=summary.r
+00013130: 6570 6c61 6365 2822 5c5c 7865 325c 5c78  eplace("\\xe2\\x
+00013140: 3830 5c5c 7839 3122 2c22 2d22 290d 0a20  80\\x91","-").. 
+00013150: 2020 7375 6d6d 6172 793d 7375 6d6d 6172    summary=summar
+00013160: 792e 7265 706c 6163 6528 225c 5c78 6532  y.replace("\\xe2
+00013170: 5c5c 7838 305c 5c78 3932 222c 222d 2229  \\x80\\x92","-")
+00013180: 0d0a 2020 2073 756d 6d61 7279 3d73 756d  ..   summary=sum
+00013190: 6d61 7279 2e72 6570 6c61 6365 2822 5c5c  mary.replace("\\
+000131a0: 7865 325c 5c78 3830 5c5c 7839 3322 2c22  xe2\\x80\\x93","
+000131b0: 2d22 290d 0a20 2020 7375 6d6d 6172 793d  -")..   summary=
+000131c0: 7375 6d6d 6172 792e 7265 706c 6163 6528  summary.replace(
+000131d0: 225c 5c78 6532 5c5c 7838 305c 5c78 3934  "\\xe2\\x80\\x94
+000131e0: 222c 222d 2229 0d0a 2020 2073 756d 6d61  ","-")..   summa
+000131f0: 7279 3d73 756d 6d61 7279 2e72 6570 6c61  ry=summary.repla
+00013200: 6365 2822 5c5c 7865 325c 5c78 3830 5c5c  ce("\\xe2\\x80\\
+00013210: 7839 3522 2c22 2d22 290d 0a20 2020 7375  x95","-")..   su
+00013220: 6d6d 6172 793d 7375 6d6d 6172 792e 7265  mmary=summary.re
+00013230: 706c 6163 6528 225c 5c78 6532 5c5c 7838  place("\\xe2\\x8
+00013240: 305c 5c78 6233 222c 2722 2729 0d0a 2020  0\\xb3",'"')..  
+00013250: 2073 756d 6d61 7279 203d 2073 756d 6d61   summary = summa
+00013260: 7279 2e72 6570 6c61 6365 2827 e280 9c27  ry.replace('...'
+00013270: 2c20 2722 2729 0d0a 2020 2073 756d 6d61  , '"')..   summa
+00013280: 7279 203d 2073 756d 6d61 7279 2e72 6570  ry = summary.rep
+00013290: 6c61 6365 2827 e280 9d27 2c20 2722 2729  lace('...', '"')
+000132a0: 0d0a 2020 2073 756d 6d61 7279 203d 2073  ..   summary = s
+000132b0: 756d 6d61 7279 2e72 6570 6c61 6365 2827  ummary.replace('
+000132c0: e280 9927 2c20 2227 2229 0d0a 2020 2073  ...', "'")..   s
+000132d0: 756d 6d61 7279 203d 2073 756d 6d61 7279  ummary = summary
+000132e0: 2e72 6570 6c61 6365 2827 e280 9827 2c20  .replace('...', 
+000132f0: 2227 2229 0d0a 2020 2073 756d 6d61 7279  "'")..   summary
+00013300: 203d 2073 756d 6d61 7279 2e72 6570 6c61   = summary.repla
+00013310: 6365 2827 e280 9327 2c20 222d 2229 0d0a  ce('...', "-")..
+00013320: 2020 2073 756d 6d61 7279 203d 2073 756d     summary = sum
+00013330: 6d61 7279 2e72 6570 6c61 6365 2827 e280  mary.replace('..
+00013340: a627 2c20 222e 2e2e 2229 0d0a 2020 2073  .', "...")..   s
+00013350: 756d 6d61 7279 203d 2073 756d 6d61 7279  ummary = summary
+00013360: 2e72 6570 6c61 6365 2827 e280 9427 2c20  .replace('...', 
+00013370: 222d 2229 0d0a 2020 2073 756d 6d61 7279  "-")..   summary
+00013380: 203d 2073 756d 6d61 7279 2e72 6570 6c61   = summary.repla
+00013390: 6365 2827 2227 2c20 2222 290d 0a0d 0a20  ce('"', "").... 
+000133a0: 2020 7375 6d6d 6172 7920 3d20 7375 6d6d    summary = summ
+000133b0: 6172 792e 7265 706c 6163 6528 275c 5c75  ary.replace('\\u
+000133c0: 272c 2755 2b27 290d 0a20 2020 7375 6d6d  ','U+')..   summ
+000133d0: 6172 7920 3d20 7265 2e73 7562 2872 273c  ary = re.sub(r'<
+000133e0: 555c 2b28 5b30 2d39 612d 6641 2d46 5d7b  U\+([0-9a-fA-F]{
+000133f0: 342c 367d 293e 272c 206c 616d 6264 6120  4,6})>', lambda 
+00013400: 783a 2063 6872 2869 6e74 2878 2e67 726f  x: chr(int(x.gro
+00013410: 7570 2831 292c 3136 2929 2c20 7375 6d6d  up(1),16)), summ
+00013420: 6172 7929 0d0a 0d0a 2020 206b 6579 776f  ary)....   keywo
+00013430: 7264 733d 6765 746b 6579 776f 7264 7328  rds=getkeywords(
+00013440: 7375 6d6d 6172 792c 6d61 786b 6579 776f  summary,maxkeywo
+00013450: 7264 7329 0d0a 0d0a 2020 2073 756d 6d61  rds)....   summa
+00013460: 7279 776f 7264 7320 3d20 6c65 6e28 7375  rywords = len(su
+00013470: 6d6d 6172 792e 7370 6c69 7428 2220 2229  mmary.split(" ")
+00013480: 290d 0a20 0d0a 2020 206d 6169 6e6f 7574  ).. ..   mainout
+00013490: 3d22 5c22 2220 2b20 6b65 7977 6f72 6473  ="\"" + keywords
+000134a0: 202b 2022 5c22 2c5c 226f 7269 6769 6e61   + "\",\"origina
+000134b0: 6c77 6f72 6463 6f75 6e74 5c22 3a22 202b  lwordcount\":" +
+000134c0: 2073 7472 286f 7269 6769 6e61 6c77 6f72   str(originalwor
+000134d0: 6473 2920 2b20 222c 5c22 7375 6d6d 6172  ds) + ",\"summar
+000134e0: 7977 6f72 6463 6f75 6e74 5c22 3a22 2b20  ywordcount\":"+ 
+000134f0: 7374 7228 7375 6d6d 6172 7977 6f72 6473  str(summarywords
+00013500: 2920 2b22 2c5c 226d 6169 6e73 756d 6d61  ) +",\"mainsumma
+00013510: 7279 5c22 3a7b 5c22 7375 6d6d 6172 795c  ry\":{\"summary\
+00013520: 223a 205c 2222 202b 2073 756d 6d61 7279  ": \"" + summary
+00013530: 202b 2022 5c22 7d7d 220d 0a20 2020 7265   + "\"}}"..   re
+00013540: 7475 726e 206d 6169 6e6f 7574 0d0a 2020  turn mainout..  
+00013550: 200d 0a23 2323 2323 2323 2323 2323 2323   ..#############
+00013560: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00013570: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00013580: 2323 2323 0d0a 0d0a 6672 6f6d 206c 616e  ####....from lan
+00013590: 6763 6861 696e 2e65 6d62 6564 6469 6e67  gchain.embedding
+000135a0: 732e 6f70 656e 6169 2069 6d70 6f72 7420  s.openai import 
+000135b0: 4f70 656e 4149 456d 6265 6464 696e 6773  OpenAIEmbeddings
+000135c0: 0d0a 6672 6f6d 206c 616e 6763 6861 696e  ..from langchain
+000135d0: 2e74 6578 745f 7370 6c69 7474 6572 2069  .text_splitter i
+000135e0: 6d70 6f72 7420 4368 6172 6163 7465 7254  mport CharacterT
+000135f0: 6578 7453 706c 6974 7465 720d 0a66 726f  extSplitter..fro
+00013600: 6d20 6c61 6e67 6368 6169 6e2e 7665 6374  m langchain.vect
+00013610: 6f72 7374 6f72 6573 2e66 6169 7373 2069  orstores.faiss i
+00013620: 6d70 6f72 7420 4641 4953 530d 0a0d 0a66  mport FAISS....f
+00013630: 726f 6d20 6c61 6e67 6368 6169 6e2e 6368  rom langchain.ch
+00013640: 6169 6e73 2e71 7565 7374 696f 6e5f 616e  ains.question_an
+00013650: 7377 6572 696e 6720 696d 706f 7274 206c  swering import l
+00013660: 6f61 645f 7161 5f63 6861 696e 0d0a 6672  oad_qa_chain..fr
+00013670: 6f6d 206c 616e 6763 6861 696e 2e6c 6c6d  om langchain.llm
+00013680: 7320 696d 706f 7274 2050 726f 6d70 744c  s import PromptL
+00013690: 6179 6572 4f70 656e 4149 4368 6174 0d0a  ayerOpenAIChat..
+000136a0: 6672 6f6d 206c 616e 6763 6861 696e 2e63  from langchain.c
+000136b0: 6861 745f 6d6f 6465 6c73 2069 6d70 6f72  hat_models impor
+000136c0: 7420 4368 6174 4f70 656e 4149 0d0a 6672  t ChatOpenAI..fr
+000136d0: 6f6d 206c 616e 6763 6861 696e 2e6c 6c6d  om langchain.llm
+000136e0: 7320 696d 706f 7274 204f 7065 6e41 490d  s import OpenAI.
+000136f0: 0a69 6d70 6f72 7420 6861 7368 6c69 620d  .import hashlib.
+00013700: 0a0d 0a23 2041 6e73 7765 7220 7175 6573  ...# Answer ques
+00013710: 7469 6f6e 7320 6162 6f75 7420 7468 6520  tions about the 
+00013720: 6865 6164 6c69 6e65 730d 0a64 6566 2073  headlines..def s
+00013730: 7461 7274 5f63 6f6e 7665 7273 6174 696f  tart_conversatio
+00013740: 6e28 6f70 656e 6169 6b65 792c 7175 6572  n(openaikey,quer
+00013750: 792c 7465 7874 2c74 656d 7065 7261 7475  y,text,temperatu
+00013760: 7265 2c6d 6f64 656c 293a 0d0a 2020 2020  re,model):..    
+00013770: 2320 4772 6162 2074 6865 2069 6e70 7574  # Grab the input
+00013780: 2066 726f 6d20 7468 6520 4150 490d 0a20   from the API.. 
+00013790: 2020 2020 2020 2023 7175 6572 7920 3d20         #query = 
+000137a0: 696e 7075 7473 5b22 7175 6572 7922 0d0a  inputs["query"..
+000137b0: 0d0a 0d0a 2020 2020 2020 2020 7465 7874  ....        text
+000137c0: 5f73 706c 6974 7465 7220 3d20 4368 6172  _splitter = Char
+000137d0: 6163 7465 7254 6578 7453 706c 6974 7465  acterTextSplitte
+000137e0: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
+000137f0: 7365 7061 7261 746f 723d 2220 222c 0d0a  separator=" ",..
+00013800: 2020 2020 2020 2020 2020 2020 6368 756e              chun
+00013810: 6b5f 7369 7a65 3d31 3030 302c 0d0a 2020  k_size=1000,..  
+00013820: 2020 2020 2020 2020 2020 6368 756e 6b5f            chunk_
+00013830: 6f76 6572 6c61 703d 3230 302c 0d0a 2020  overlap=200,..  
+00013840: 2020 2020 2020 2020 2020 6c65 6e67 7468            length
+00013850: 5f66 756e 6374 696f 6e3d 6c65 6e2c 0d0a  _function=len,..
+00013860: 2020 2020 2020 2020 290d 0a0d 0a20 2020          )....   
+00013870: 2020 2020 2074 6578 7473 203d 2074 6578       texts = tex
+00013880: 745f 7370 6c69 7474 6572 2e73 706c 6974  t_splitter.split
+00013890: 5f74 6578 7428 7465 7874 290d 0a20 2020  _text(text)..   
+000138a0: 2020 2020 2065 6d62 6564 6469 6e67 7320       embeddings 
+000138b0: 3d20 4f70 656e 4149 456d 6265 6464 696e  = OpenAIEmbeddin
+000138c0: 6773 2829 0d0a 2020 2020 2020 2020 646f  gs()..        do
+000138d0: 6373 6561 7263 6820 3d20 4641 4953 532e  csearch = FAISS.
+000138e0: 6672 6f6d 5f74 6578 7473 2874 6578 7473  from_texts(texts
+000138f0: 2c20 656d 6265 6464 696e 6773 290d 0a20  , embeddings).. 
+00013900: 2020 2020 2020 2064 6f63 7320 3d20 646f         docs = do
+00013910: 6373 6561 7263 682e 7369 6d69 6c61 7269  csearch.similari
+00013920: 7479 5f73 6561 7263 6828 7175 6572 7929  ty_search(query)
+00013930: 0d0a 2020 2020 2020 2020 0d0a 2020 2020  ..        ..    
+00013940: 2020 2020 6368 6169 6e20 3d20 6c6f 6164      chain = load
+00013950: 5f71 615f 6368 6169 6e28 4f70 656e 4149  _qa_chain(OpenAI
+00013960: 286d 6f64 656c 5f6e 616d 653d 6d6f 6465  (model_name=mode
+00013970: 6c2c 2074 656d 7065 7261 7475 7265 3d74  l, temperature=t
+00013980: 656d 7065 7261 7475 7265 2c6f 7065 6e61  emperature,opena
+00013990: 695f 6170 695f 6b65 793d 6f70 656e 6169  i_api_key=openai
+000139a0: 6b65 7929 2c20 6368 6169 6e5f 7479 7065  key), chain_type
+000139b0: 3d22 7374 7566 6622 290d 0a20 2020 2020  ="stuff")..     
+000139c0: 2020 2072 6573 203d 2063 6861 696e 287b     res = chain({
+000139d0: 2269 6e70 7574 5f64 6f63 756d 656e 7473  "input_documents
+000139e0: 223a 2064 6f63 732c 2022 7175 6573 7469  ": docs, "questi
+000139f0: 6f6e 223a 2071 7565 7279 7d2c 2072 6574  on": query}, ret
+00013a00: 7572 6e5f 6f6e 6c79 5f6f 7574 7075 7473  urn_only_outputs
+00013a10: 3d54 7275 6529 0d0a 0d0a 2020 2020 2020  =True)....      
+00013a20: 2020 2372 6574 7572 6e20 7b22 7072 6564    #return {"pred
+00013a30: 223a 2072 6573 7d0d 0a20 2020 2020 2020  ": res}..       
+00013a40: 2072 6574 7572 6e20 7265 730d 0a0d 0a23   return res....#
+00013a50: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00013a60: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00013a70: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00013a80: 2323 230d 0a66 726f 6d20 7064 6671 7565  ###..from pdfque
+00013a90: 7279 2069 6d70 6f72 7420 5044 4651 7565  ry import PDFQue
+00013aa0: 7279 0d0a 696d 706f 7274 2078 6d6c 746f  ry..import xmlto
+00013ab0: 6469 6374 0d0a 0d0a 0d0a 6465 6620 6c61  dict......def la
+00013ac0: 6265 6c66 6965 6c64 7328 6669 6c65 6e61  belfields(filena
+00013ad0: 6d65 2c6c 6162 656c 6e61 6d65 2c61 6372  me,labelname,acr
+00013ae0: 6f74 7970 6529 3a0d 0a20 2020 2020 7064  otype):..     pd
+00013af0: 6620 3d20 5044 4651 7565 7279 2866 696c  f = PDFQuery(fil
+00013b00: 656e 616d 6529 0d0a 2020 2020 2070 6466  ename)..     pdf
+00013b10: 2e6c 6f61 6428 290d 0a20 2020 2020 234c  .load()..     #L
+00013b20: 5454 6578 744c 696e 6548 6f72 697a 6f6e  TTextLineHorizon
+00013b30: 7461 6c0d 0a20 2020 2020 6c61 6265 6c20  tal..     label 
+00013b40: 3d20 7064 662e 7071 2861 6372 6f74 7970  = pdf.pq(acrotyp
+00013b50: 652b 273a 636f 6e74 6169 6e73 2822 272b  e+':contains("'+
+00013b60: 6c61 6265 6c6e 616d 6520 2b20 2722 2927  labelname + '")'
+00013b70: 290d 0a20 2020 2020 6c65 6674 5f63 6f72  )..     left_cor
+00013b80: 6e65 7220 3d20 666c 6f61 7428 6c61 6265  ner = float(labe
+00013b90: 6c2e 6174 7472 2827 7830 2729 290d 0a20  l.attr('x0')).. 
+00013ba0: 2020 2020 626f 7474 6f6d 5f63 6f72 6e65      bottom_corne
+00013bb0: 7220 3d20 666c 6f61 7428 6c61 6265 6c2e  r = float(label.
+00013bc0: 6174 7472 2827 7930 2729 290d 0a20 2020  attr('y0'))..   
+00013bd0: 2020 6e61 6d65 203d 2070 6466 2e70 7128    name = pdf.pq(
+00013be0: 6163 726f 7479 7065 202b 273a 696e 5f62  acrotype +':in_b
+00013bf0: 626f 7828 2225 732c 2025 732c 2025 732c  box("%s, %s, %s,
+00013c00: 2025 7322 2927 2025 2028 6c65 6674 5f63   %s")' % (left_c
+00013c10: 6f72 6e65 722c 2062 6f74 746f 6d5f 636f  orner, bottom_co
+00013c20: 726e 6572 2d33 302c 206c 6566 745f 636f  rner-30, left_co
+00013c30: 726e 6572 2b31 3530 2c20 626f 7474 6f6d  rner+150, bottom
+00013c40: 5f63 6f72 6e65 7229 292e 7465 7874 2829  _corner)).text()
+00013c50: 0d0a 2020 2020 2072 6574 7572 6e20 6e61  ..     return na
+00013c60: 6d65 0d0a 0d0a 0d0a 6465 6620 6578 7472  me......def extr
+00013c70: 6163 7466 6965 6c64 7328 6669 6c65 6e61  actfields(filena
+00013c80: 6d65 293a 0d0a 2020 2020 2020 2372 6561  me):..      #rea
+00013c90: 6420 7468 6520 5044 460d 0a20 2020 2020  d the PDF..     
+00013ca0: 2070 6466 203d 2050 4446 5175 6572 7928   pdf = PDFQuery(
+00013cb0: 6669 6c65 6e61 6d65 290d 0a20 2020 2020  filename)..     
+00013cc0: 2070 6466 2e6c 6f61 6428 290d 0a0d 0a20   pdf.load().... 
+00013cd0: 2020 2020 2023 6f20 3d20 786d 6c74 6f64       #o = xmltod
+00013ce0: 6963 742e 7061 7273 6528 273c 653e 203c  ict.parse('<e> <
+00013cf0: 613e 7465 7874 3c2f 613e 203c 613e 7465  a>text</a> <a>te
+00013d00: 7874 3c2f 613e 203c 2f65 3e27 290d 0a0d  xt</a> </e>')...
+00013d10: 0a20 2020 2020 2023 636f 6e76 6572 7420  .      #convert 
+00013d20: 7468 6520 7064 6620 746f 2058 4d4c 0d0a  the pdf to XML..
+00013d30: 2020 2020 2020 786d 6c66 696c 653d 2066        xmlfile= f
+00013d40: 696c 656e 616d 6520 2b20 272e 786d 6c27  ilename + '.xml'
+00013d50: 0d0a 2020 2020 2020 7064 662e 7472 6565  ..      pdf.tree
+00013d60: 2e77 7269 7465 2878 6d6c 6669 6c65 2c20  .write(xmlfile, 
+00013d70: 7072 6574 7479 5f70 7269 6e74 203d 2054  pretty_print = T
+00013d80: 7275 6529 0d0a 2020 2020 2020 7769 7468  rue)..      with
+00013d90: 206f 7065 6e28 786d 6c66 696c 6529 2061   open(xmlfile) a
+00013da0: 7320 663a 2073 203d 2066 2e72 6561 6428  s f: s = f.read(
+00013db0: 290d 0a0d 0a20 2020 2020 2023 7072 696e  )....      #prin
+00013dc0: 7428 7329 0d0a 2020 2020 2020 6a73 6f6e  t(s)..      json
+00013dd0: 6275 663d 786d 6c74 6f6a 736f 6e28 732c  buf=xmltojson(s,
+00013de0: 786d 6c66 696c 6529 0d0a 0d0a 2020 2020  xmlfile)....    
+00013df0: 2020 7265 7475 726e 206a 736f 6e62 7566    return jsonbuf
+00013e00: 0d0a 2020 2020 2020 0d0a 0d0a 6465 6620  ..      ....def 
+00013e10: 786d 6c74 6f6a 736f 6e28 786d 6c62 7566  xmltojson(xmlbuf
+00013e20: 6665 722c 786d 6c66 696c 6529 3a0d 0a0d  fer,xmlfile):...
+00013e30: 0a20 2020 2020 206f 203d 2078 6d6c 746f  .      o = xmlto
+00013e40: 6469 6374 2e70 6172 7365 2878 6d6c 6275  dict.parse(xmlbu
+00013e50: 6666 6572 290d 0a20 2020 2020 2078 6d6c  ffer)..      xml
+00013e60: 6a73 6f6e 3d6a 736f 6e2e 6475 6d70 7328  json=json.dumps(
+00013e70: 6f29 0d0a 2020 2020 2020 2370 7269 6e74  o)..      #print
+00013e80: 2878 6d6c 6a73 6f6e 290d 0a20 2020 2020  (xmljson)..     
+00013e90: 2077 6974 6820 6f70 656e 2878 6d6c 6669   with open(xmlfi
+00013ea0: 6c65 202b 2027 2e6a 736f 6e27 2c22 7722  le + '.json',"w"
+00013eb0: 2920 6173 2066 3a0d 0a20 2020 2020 2020  ) as f:..       
+00013ec0: 2066 2e77 7269 7465 2878 6d6c 6a73 6f6e   f.write(xmljson
+00013ed0: 290d 0a0d 0a20 2020 2020 2072 6574 7572  )....      retur
+00013ee0: 6e20 786d 6c6a 736f 6e20 200d 0a0d 0a23  n xmljson  ....#
+00013ef0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00013f00: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00013f10: 2323 2323 2323 2323 2323 2323 2323 0d0a  ##############..
+00013f20: 696d 706f 7274 2065 6173 796f 6372 0d0a  import easyocr..
+00013f30: 696d 706f 7274 2073 7065 6563 685f 7265  import speech_re
+00013f40: 636f 676e 6974 696f 6e20 6173 2073 720d  cognition as sr.
+00013f50: 0a69 6d70 6f72 7420 6d6f 7669 6570 792e  .import moviepy.
+00013f60: 6564 6974 6f72 2061 7320 6d70 650d 0a0d  editor as mpe...
+00013f70: 0a64 6566 2063 6f6e 7665 7274 7669 6465  .def convertvide
+00013f80: 6f74 6f74 6578 7428 6669 6c65 6e61 6d65  ototext(filename
+00013f90: 293a 0d0a 2020 2020 2020 2020 2363 6f6e  ):..        #con
+00013fa0: 7665 7274 2074 6f20 6175 6469 6f0d 0a20  vert to audio.. 
+00013fb0: 2020 2020 2020 2076 6964 656f 203d 206d         video = m
+00013fc0: 7065 2e56 6964 656f 4669 6c65 436c 6970  pe.VideoFileClip
+00013fd0: 2866 696c 656e 616d 6529 0d0a 2020 2020  (filename)..    
+00013fe0: 2020 2020 6175 6469 6f66 696c 653d 6669      audiofile=fi
+00013ff0: 6c65 6e61 6d65 202b 2022 2e77 6176 220d  lename + ".wav".
+00014000: 0a20 2020 2020 2020 200d 0a20 2020 2020  .        ..     
+00014010: 2020 2076 6964 656f 2e61 7564 696f 2e77     video.audio.w
+00014020: 7269 7465 5f61 7564 696f 6669 6c65 2861  rite_audiofile(a
+00014030: 7564 696f 6669 6c65 290d 0a20 2020 2020  udiofile)..     
+00014040: 2020 2072 6573 756c 7420 3d20 6175 6469     result = audi
+00014050: 6f74 6f74 6578 7428 6175 6469 6f66 696c  ototext(audiofil
+00014060: 6529 0d0a 2020 2020 2020 2020 0d0a 2020  e)..        ..  
+00014070: 2020 2020 2020 7265 7475 726e 2072 6573        return res
+00014080: 756c 740d 0a0d 0a64 6566 2061 7564 696f  ult....def audio
+00014090: 746f 7465 7874 2866 696c 656e 616d 6529  totext(filename)
+000140a0: 3a0d 0a20 2020 2020 2020 2072 203d 2073  :..        r = s
+000140b0: 722e 5265 636f 676e 697a 6572 2829 0d0a  r.Recognizer()..
+000140c0: 2020 2020 2020 2020 6175 6469 6f20 3d20          audio = 
+000140d0: 7372 2e41 7564 696f 4669 6c65 2866 696c  sr.AudioFile(fil
+000140e0: 656e 616d 6529 0d0a 2020 2020 2020 2020  ename)..        
+000140f0: 7769 7468 2061 7564 696f 2061 7320 736f  with audio as so
+00014100: 7572 6365 3a0d 0a20 2020 2020 2020 2020  urce:..         
+00014110: 2061 7564 696f 5f66 696c 6520 3d20 722e   audio_file = r.
+00014120: 7265 636f 7264 2873 6f75 7263 6529 0d0a  record(source)..
+00014130: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00014140: 2072 2e72 6563 6f67 6e69 7a65 5f67 6f6f   r.recognize_goo
+00014150: 676c 6528 6175 6469 6f5f 6669 6c65 290d  gle(audio_file).
+00014160: 0a20 2020 2020 2020 2073 7065 6563 6866  .        speechf
+00014170: 696c 6520 3d20 6669 6c65 6e61 6d65 202b  ile = filename +
+00014180: 2027 2e73 7065 6563 682e 7478 7427 0d0a   '.speech.txt'..
+00014190: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
+000141a0: 6e28 6669 6c65 6e61 6d65 202b 2027 2e73  n(filename + '.s
+000141b0: 7065 6563 682e 7478 7427 2c6d 6f64 6520  peech.txt',mode 
+000141c0: 3d27 7727 2920 6173 2066 696c 653a 200d  ='w') as file: .
+000141d0: 0a20 2020 2020 2020 2020 2020 6669 6c65  .           file
+000141e0: 2e77 7269 7465 2872 6573 756c 7429 0d0a  .write(result)..
+000141f0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00014200: 2072 6573 756c 7420 2020 0d0a 0d0a 0d0a   result   ......
+00014210: 6465 6620 646f 6f63 726d 6169 6e28 6669  def doocrmain(fi
+00014220: 6c65 6e61 6d65 293a 0d0a 0d0a 2020 2020  lename):....    
+00014230: 7265 6164 6572 203d 2065 6173 796f 6372  reader = easyocr
+00014240: 2e52 6561 6465 7228 5b27 656e 275d 2920  .Reader(['en']) 
+00014250: 2020 0d0a 2020 2020 626f 756e 6420 3d20    ..    bound = 
+00014260: 7265 6164 6572 2e72 6561 6474 6578 7428  reader.readtext(
+00014270: 6669 6c65 6e61 6d65 290d 0a20 2020 2072  filename)..    r
+00014280: 6574 7572 6e20 626f 756e 640d 0a20 2020  eturn bound..   
+00014290: 200d 0a23 6669 6c65 6e61 6d65 3d27 7465   ..#filename='te
+000142a0: 7374 2d74 6178 2e70 6466 2720 2020 2020  st-tax.pdf'     
+000142b0: 0d0a 2370 6466 6a73 6f6e 3d65 7874 7261  ..#pdfjson=extra
+000142c0: 6374 6669 656c 6473 2866 696c 656e 616d  ctfields(filenam
+000142d0: 6529 0d0a 236e 616d 6574 6578 743d 6c61  e)..#nametext=la
+000142e0: 6265 6c66 6965 6c64 7328 6669 6c65 6e61  belfields(filena
+000142f0: 6d65 2c22 4275 7369 6e65 7373 206e 756d  me,"Business num
+00014300: 6265 7222 2c22 4c54 5465 7874 4c69 6e65  ber","LTTextLine
+00014310: 486f 7269 7a6f 6e74 616c 2229 0d0a 2370  Horizontal")..#p
+00014320: 7269 6e74 286e 616d 6574 6578 7429 0d0a  rint(nametext)..
+00014330: 0d0a                                     ..
```

### Comparing `maadstml-3.37/maadstml/tmltextsummary.py` & `maadstml-3.38/maadstml/tmltextsummary.py`

 * *Files identical despite different names*

### Comparing `maadstml-3.37/maadstml.egg-info/PKG-INFO` & `maadstml-3.38/maadstml.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: maadstml
-Version: 3.37
+Version: 3.38
 Summary: Multi-Agent Accelerator for Data Science (MAADS): Transactional Machine Learning
 Home-page: https://github.com/smaurice101/transactionalmachinelearning
 Author: Sebastian Maurice
 Author-email: sebastian.maurice@otics.ca
 License: MIT License
 Keywords: multi-agent, transactional machine learning, data streams, data science, optimization, prescriptive analytics, machine learning, automl,auto-ml,artificial intelligence,predictive analytics,advanced analytics
 Description-Content-Type: text/markdown
```

### Comparing `maadstml-3.37/setup.py` & `maadstml-3.38/setup.py`

 * *Files 1% similar despite different names*

```diff
@@ -10,15 +10,15 @@
 	
 
 with open("requirements.txt","r") as f:
     required = f.read().splitlines()
     
 setuptools.setup(
     name='maadstml',
-    version='3.37',
+    version='3.38',
     description='Multi-Agent Accelerator for Data Science (MAADS): Transactional Machine Learning',
     license='MIT License',
     packages=['maadstml'],
     author='Sebastian Maurice',
     author_email='sebastian.maurice@otics.ca',
     keywords=['multi-agent, transactional machine learning, data streams, data science, optimization, prescriptive analytics, machine learning, automl,auto-ml,artificial intelligence', 'predictive analytics', 'advanced analytics'],
     long_description=long_description,
```

