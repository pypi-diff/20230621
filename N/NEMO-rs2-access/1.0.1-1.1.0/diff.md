# Comparing `tmp/NEMO_rs2_access-1.0.1-py3-none-any.whl.zip` & `tmp/NEMO_rs2_access-1.1.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,25 +1,26 @@
-Zip file size: 17700 bytes, number of entries: 23
--rw-r--r--  2.0 unx        0 b- defN 23-May-19 14:08 NEMO_rs2_access/__init__.py
--rw-r--r--  2.0 unx     1878 b- defN 23-May-19 14:08 NEMO_rs2_access/admin.py
--rw-r--r--  2.0 unx       59 b- defN 23-May-19 14:08 NEMO_rs2_access/app_settings.py
--rw-r--r--  2.0 unx      543 b- defN 23-May-19 14:08 NEMO_rs2_access/apps.py
--rw-r--r--  2.0 unx     1277 b- defN 23-May-19 14:08 NEMO_rs2_access/models.py
--rw-r--r--  2.0 unx     9767 b- defN 23-May-19 14:08 NEMO_rs2_access/rs2.py
--rw-r--r--  2.0 unx      169 b- defN 23-May-19 14:08 NEMO_rs2_access/urls.py
--rw-r--r--  2.0 unx     2675 b- defN 23-May-19 14:08 NEMO_rs2_access/views.py
--rw-r--r--  2.0 unx        0 b- defN 23-May-19 14:08 NEMO_rs2_access/management/__init__.py
--rw-r--r--  2.0 unx        0 b- defN 23-May-19 14:08 NEMO_rs2_access/management/commands/__init__.py
--rw-r--r--  2.0 unx      240 b- defN 23-May-19 14:08 NEMO_rs2_access/management/commands/rs2_sync_access.py
--rw-r--r--  2.0 unx      229 b- defN 23-May-19 14:08 NEMO_rs2_access/management/commands/rs2_sync_readers.py
--rw-r--r--  2.0 unx     1830 b- defN 23-May-19 14:08 NEMO_rs2_access/migrations/0001_initial.py
--rw-r--r--  2.0 unx        0 b- defN 23-May-19 14:08 NEMO_rs2_access/migrations/__init__.py
--rw-rw-rw-  2.0 unx     1316 b- defN 23-May-19 14:08 NEMO_rs2_access/templates/NEMO_rs2_access/preferences_default_project.html
--rw-r--r--  2.0 unx        0 b- defN 23-May-19 14:08 NEMO_rs2_access/tests/__init__.py
--rw-r--r--  2.0 unx     9353 b- defN 23-May-19 14:08 NEMO_rs2_access/tests/test_rs2.py
--rw-r--r--  2.0 unx     5224 b- defN 23-May-19 14:08 NEMO_rs2_access/tests/test_settings.py
--rw-rw-rw-  2.0 unx     1074 b- defN 23-May-19 14:09 NEMO_rs2_access-1.0.1.dist-info/LICENSE
--rw-r--r--  2.0 unx     2853 b- defN 23-May-19 14:09 NEMO_rs2_access-1.0.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-19 14:09 NEMO_rs2_access-1.0.1.dist-info/WHEEL
--rw-r--r--  2.0 unx       16 b- defN 23-May-19 14:09 NEMO_rs2_access-1.0.1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2082 b- defN 23-May-19 14:09 NEMO_rs2_access-1.0.1.dist-info/RECORD
-23 files, 40677 bytes uncompressed, 14230 bytes compressed:  65.0%
+Zip file size: 19334 bytes, number of entries: 24
+-rw-r--r--  2.0 unx        0 b- defN 23-May-27 00:47 NEMO_rs2_access/__init__.py
+-rw-r--r--  2.0 unx     2113 b- defN 23-May-27 00:47 NEMO_rs2_access/admin.py
+-rw-r--r--  2.0 unx      229 b- defN 23-May-27 00:47 NEMO_rs2_access/app_settings.py
+-rw-r--r--  2.0 unx      543 b- defN 23-May-27 00:47 NEMO_rs2_access/apps.py
+-rw-r--r--  2.0 unx     1719 b- defN 23-May-27 00:47 NEMO_rs2_access/models.py
+-rw-r--r--  2.0 unx    12092 b- defN 23-May-27 00:47 NEMO_rs2_access/rs2.py
+-rw-r--r--  2.0 unx      392 b- defN 23-May-27 00:47 NEMO_rs2_access/urls.py
+-rw-r--r--  2.0 unx     3132 b- defN 23-May-27 00:47 NEMO_rs2_access/views.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-27 00:47 NEMO_rs2_access/management/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-27 00:47 NEMO_rs2_access/management/commands/__init__.py
+-rw-r--r--  2.0 unx      240 b- defN 23-May-27 00:47 NEMO_rs2_access/management/commands/rs2_sync_access.py
+-rw-r--r--  2.0 unx      229 b- defN 23-May-27 00:47 NEMO_rs2_access/management/commands/rs2_sync_readers.py
+-rw-r--r--  2.0 unx     1830 b- defN 23-May-27 00:47 NEMO_rs2_access/migrations/0001_initial.py
+-rw-r--r--  2.0 unx      902 b- defN 23-May-27 00:47 NEMO_rs2_access/migrations/0002_cardholder.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-27 00:47 NEMO_rs2_access/migrations/__init__.py
+-rw-rw-rw-  2.0 unx     1316 b- defN 23-May-27 00:47 NEMO_rs2_access/templates/NEMO_rs2_access/preferences_default_project.html
+-rw-r--r--  2.0 unx        0 b- defN 23-May-27 00:47 NEMO_rs2_access/tests/__init__.py
+-rw-r--r--  2.0 unx     9447 b- defN 23-May-27 00:47 NEMO_rs2_access/tests/test_rs2.py
+-rw-r--r--  2.0 unx     5224 b- defN 23-May-27 00:47 NEMO_rs2_access/tests/test_settings.py
+-rw-rw-rw-  2.0 unx     1074 b- defN 23-May-27 00:47 NEMO_rs2_access-1.1.0.dist-info/LICENSE
+-rw-r--r--  2.0 unx     3210 b- defN 23-May-27 00:47 NEMO_rs2_access-1.1.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-27 00:47 NEMO_rs2_access-1.1.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx       16 b- defN 23-May-27 00:47 NEMO_rs2_access-1.1.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2185 b- defN 23-May-27 00:47 NEMO_rs2_access-1.1.0.dist-info/RECORD
+24 files, 45985 bytes uncompressed, 15698 bytes compressed:  65.9%
```

## zipnote {}

```diff
@@ -33,14 +33,17 @@
 
 Filename: NEMO_rs2_access/management/commands/rs2_sync_readers.py
 Comment: 
 
 Filename: NEMO_rs2_access/migrations/0001_initial.py
 Comment: 
 
+Filename: NEMO_rs2_access/migrations/0002_cardholder.py
+Comment: 
+
 Filename: NEMO_rs2_access/migrations/__init__.py
 Comment: 
 
 Filename: NEMO_rs2_access/templates/NEMO_rs2_access/preferences_default_project.html
 Comment: 
 
 Filename: NEMO_rs2_access/tests/__init__.py
@@ -48,23 +51,23 @@
 
 Filename: NEMO_rs2_access/tests/test_rs2.py
 Comment: 
 
 Filename: NEMO_rs2_access/tests/test_settings.py
 Comment: 
 
-Filename: NEMO_rs2_access-1.0.1.dist-info/LICENSE
+Filename: NEMO_rs2_access-1.1.0.dist-info/LICENSE
 Comment: 
 
-Filename: NEMO_rs2_access-1.0.1.dist-info/METADATA
+Filename: NEMO_rs2_access-1.1.0.dist-info/METADATA
 Comment: 
 
-Filename: NEMO_rs2_access-1.0.1.dist-info/WHEEL
+Filename: NEMO_rs2_access-1.1.0.dist-info/WHEEL
 Comment: 
 
-Filename: NEMO_rs2_access-1.0.1.dist-info/top_level.txt
+Filename: NEMO_rs2_access-1.1.0.dist-info/top_level.txt
 Comment: 
 
-Filename: NEMO_rs2_access-1.0.1.dist-info/RECORD
+Filename: NEMO_rs2_access-1.1.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## NEMO_rs2_access/admin.py

```diff
@@ -1,14 +1,14 @@
 import json
 
 from django.contrib import admin
 from django.contrib.admin import register
 from django.utils.safestring import mark_safe
 
-from NEMO_rs2_access.models import Reader, UserPreferencesDefaultProject
+from NEMO_rs2_access.models import Cardholder, Reader, UserPreferencesDefaultProject
 from NEMO_rs2_access.rs2 import sync_access, sync_readers
 
 
 @admin.action(description="Sync all readers with RS2")
 def admin_sync_readers(modeladmin, request, queryset):
     sync_readers()
 
@@ -48,7 +48,13 @@
     actions = [admin_sync_readers, admin_sync_access]
 
     @admin.display(description="Data", ordering="data")
     def get_data(self, obj: Reader):
         result = json.dumps(obj.data, indent=4, sort_keys=True)
         result_str = f"<pre>{result}</pre>"
         return mark_safe(result_str)
+
+
+@register(Cardholder)
+class CardholderAdmin(admin.ModelAdmin):
+    list_display = ["cardholder_id", "cardholder_name", "key_name", "key_value", "created", "last_updated"]
+    readonly_fields = ["created", "last_updated"]
```

## NEMO_rs2_access/app_settings.py

```diff
@@ -1,2 +1,8 @@
+DEFAULT = {
+	"cardholder_sync": False,
+	"user_sync_field": "CardNumber",
+	"nemo_user_sync_field": "badge_number",
+	"relevant_event_types" : [601, 607]  # 601 is access granted, 607 Access Granted Door Unlocked
+}
+
 RS2_ACCESS = {}
-RS2_BADGE_NUMBER_SYNC_FIELD = "CardNumber"
```

## NEMO_rs2_access/models.py

```diff
@@ -30,7 +30,19 @@
     area = models.ForeignKey(Area, null=True, blank=True, on_delete=models.CASCADE)
     reader_type = models.PositiveIntegerField(null=True, choices=ReaderType.Choices)
     last_updated = models.DateTimeField(auto_now=True)
     created = models.DateTimeField(auto_now_add=True)
 
     def __str__(self):
         return self.reader_name
+
+
+class Cardholder(models.Model):
+    cardholder_id = models.CharField(max_length=250, unique=True)
+    cardholder_name = models.CharField(max_length=250, blank=True, null=True)
+    key_name = models.CharField(max_length=250)
+    key_value = models.CharField(max_length=250)
+    last_updated = models.DateTimeField(auto_now=True)
+    created = models.DateTimeField(auto_now_add=True)
+
+    def __str__(self):
+        return self.cardholder_id
```

## NEMO_rs2_access/rs2.py

```diff
@@ -1,64 +1,68 @@
 import datetime
+from argparse import Namespace
 from logging import getLogger
 from typing import Dict, List, Set, Type, Union
 
 import requests
 from NEMO.exceptions import NEMOException
 from NEMO.models import Area, AreaAccessRecord, Customization, UsageEvent, User
 from NEMO.utilities import beginning_of_the_day, distinct_qs_value_list
 from NEMO.views.calendar import shorten_reservation
 from django.conf import settings
+
+from NEMO_rs2_access import app_settings
 from django.db.models import Model
 from django.http import HttpResponseBadRequest
 from django.utils import timezone
 from requests.auth import HTTPBasicAuth
 
-from NEMO_rs2_access.models import Reader
+from NEMO_rs2_access.models import Cardholder, Reader
 
 rs2_logger = getLogger(__name__)
 
 NEXT_EVENTS_BEGIN_DATE = "rs2_event_begin_date"
-RELEVANT_MESSAGE_TYPES = [0]  # 0 is the event message type
-RELEVANT_EVENT_TYPES = [601, 607]  # 601 is access granted, 607 Access Granted Door Unlocked
 
 READERS_URL = "/Readers"
-READERS_HISTORY_URL = "/Readers/{}/EventHistory?beginDate={}"
+READERS_HISTORY_URL = READERS_URL + "/{}/EventHistory?beginDate={}"
+CARDHOLDERS_URL = "/Cardholders/{}"
 
 reader_mapping = {
     "reader_name": "ReaderName",
     "site_id": "SiteID",
     "installed": "DeviceInstalled",
 }
 
 
 def sync_access():
+    rs2_settings = get_rs2_settings()
     try:
         # default date is beginning of the day today if not set in Customization
         default_date = beginning_of_the_day(datetime.datetime.now(), in_local_timezone=False).isoformat()
         last_event_date_read, created = Customization.objects.get_or_create(
             name=NEXT_EVENTS_BEGIN_DATE, defaults={"value": default_date}
         )
         next_event_date = last_event_date_read.value
-        events, readers = get_sorted_reader_events(next_event_date)
+        events, readers, cardholders = get_sorted_reader_events(next_event_date)
         try:
             for event in events:
+                cardholder_id = event["CardholderId"]
                 reader_id = event["SourceId"]
-                badge_number_field = event[settings.RS2_BADGE_NUMBER_SYNC_FIELD]
                 event_time = event["EventDateObject"]
                 reader = readers.get(reader_id)
+                cardholder_sync_value = cardholders.get(cardholder_id, None)
                 area = reader.area
                 if area:
                     event_user = event.get("Cardholder")
-                    user = User.objects.filter(badge_number=badge_number_field).first()
+                    user = User.objects.filter(**{rs2_settings.nemo_user_sync_field: cardholder_sync_value}).first()
                     if user:
                         login_logout(user, reader, event_time)
                     else:
                         rs2_logger.error(
-                            f"No NEMO matching user found for {settings.RS2_BADGE_NUMBER_SYNC_FIELD} {badge_number_field} - {event_user} (event at location {reader.reader_name})"
+                            f"No NEMO matching user found for {rs2_settings.user_sync_field} {cardholder_sync_value} - {event_user} (event at location {reader.reader_name})"
                         )
                 # Only set next sequence number when we are done with the current event
                 next_event_date = event["EventDate"]
         finally:
             last_event_date_read.value = next_event_date
             last_event_date_read.save()
     except Customization.DoesNotExist:
@@ -67,36 +71,81 @@
         )
         rs2_logger.error(message)
         raise NEMOException(msg=message)
     except:
         rs2_logger.exception("There was an error communication with the RS2 access system")
 
 
-def get_sorted_reader_events(begin_date: str) -> (List[Dict], Dict[int, Reader]):
+def get_sorted_reader_events(begin_date: str) -> (List[Dict], Dict[int, Reader], Dict[int, str]):
+    rs2_settings = get_rs2_settings()
     """
     Get events for all relevant readers
     Then merge them all (since login-logout happen in different readers)
     Finally we need to sort them all to recreate the chronological order of things
     """
     reader_ids = Reader.objects.filter(area__isnull=False).values_list("reader_id", flat=True)
     readers = Reader.objects.in_bulk(id_list=reader_ids, field_name="reader_id")
+    cardholder_ids = set()
+    cardholder_keys = dict()
     events = []
     for reader_id in readers:
         response = request_get(READERS_HISTORY_URL.format(reader_id, begin_date))
         response.raise_for_status()
         reader_events = response.json()
         for reader_event in reader_events:
-            if reader_event["EventType"] in RELEVANT_EVENT_TYPES:
+            if reader_event["EventType"] in rs2_settings.relevant_event_types:
                 reader_event["SourceId"] = reader_id
                 reader_event["EventDateObject"] = datetime.datetime.fromisoformat(
                     reader_event["EventDate"]
                 ).astimezone()
                 events.append(reader_event)
+                cardholder_id = reader_event.get("CardholderId", None)
+                if cardholder_id:
+                    # If we need to sync cardholder objects, store the id for later use
+                    if rs2_settings.cardholder_sync:
+                        cardholder_ids.add(cardholder_id)
+                    # Otherwise we can just grab the field from the event
+                    else:
+                        cardholder_keys[cardholder_id] = reader_event.get(rs2_settings.user_sync_field)
     events.sort(key=lambda x: x["EventDateObject"])
-    return events, readers
+    # Now we can deal with cardholders in bulk
+    if cardholder_ids:
+        key_name = rs2_settings.user_sync_field
+        # Grab the ones we already synced before
+        for cardholder in Cardholder.objects.filter(cardholder_id__in=cardholder_ids, key_name=key_name):
+            cardholder_keys[cardholder.cardholder_id] = cardholder.key_value
+        # Fetch the missing ones
+        for missing_cardholder_id in cardholder_ids.difference(cardholder_keys.keys()):
+            cardholder_keys[missing_cardholder_id] = get_cardholder_property(missing_cardholder_id)
+    return events, readers, cardholder_keys
+
+
+def get_cardholder_property(cardholder_id: str) -> str:
+    # Request cardholder data from the API and save it, returning the value
+    key_name = get_rs2_settings().user_sync_field
+    response = request_get(CARDHOLDERS_URL.format(cardholder_id))
+    response.raise_for_status()
+    rs2_cardholder = response.json()[0]
+    value: str = find_in_json(key_name, rs2_cardholder)
+    cardholder_name = rs2_cardholder.get("FirstName") + " " + rs2_cardholder.get("LastName")
+    if value:
+        value = value.strip()
+        Cardholder.objects.update_or_create(
+            cardholder_id=cardholder_id,
+            defaults={"cardholder_name": cardholder_name, "key_name": key_name, "key_value": value},
+        )
+        return value
+
+
+def find_in_json(element, json):
+    keys = element.split(".")
+    rv = json
+    for key in keys:
+        rv = rv[key]
+    return rv
 
 
 def sync_readers():
     sync_model_rest(READERS_URL, Reader, "ReaderID", reader_mapping)
 
 
 def sync_model_rest(url, model_class: Type[Model], remote_id_field_name: str, mapping: Dict):
@@ -119,24 +168,24 @@
         if to_remove:
             rs2_logger.info(f"Deleted {model_class} with ids: {', '.join(str(x) for x in to_remove)}")
     except:
         rs2_logger.exception(f"Error syncing {model_class} table")
 
 
 def request_get(url_suffix: str):
-    rs2_settings = settings.RS2_ACCESS
+    rs2_settings = get_rs2_settings()
     if rs2_settings:
         auth = (
-            HTTPBasicAuth(rs2_settings["auth"].get("user_id"), rs2_settings["auth"].get("password"))
-            if "auth" in rs2_settings
+            HTTPBasicAuth(rs2_settings.auth.get("user_id"), rs2_settings.auth.get("password"))
+            if getattr(rs2_settings, "auth")
             else None
         )
-        headers = {"PublicKey": rs2_settings.get("public_key")}
-        timeout = rs2_settings.get("timeout", 30)
-        return requests.get(rs2_settings.get("url") + url_suffix, auth=auth, headers=headers, timeout=timeout)
+        headers = {"PublicKey": rs2_settings.public_key}
+        timeout = getattr(rs2_settings, "timeout", 30)
+        return requests.get(rs2_settings.url + url_suffix, auth=auth, headers=headers, timeout=timeout)
     else:
         return HttpResponseBadRequest("no RS2_ACCESS settings found, please add them to your settings.py")
 
 
 def login_logout(user: User, reader: Reader, event_time: datetime.datetime = None):
     if reader.reader_type == Reader.ReaderType.ENTRANCE:
         login(user, reader.area, event_time)
@@ -221,7 +270,13 @@
         try:
             default_project_id = user.get_preferences().default_project.default_project_id
             if default_project_id:
                 return [default_project_id]
         except:
             pass
         return [user.active_projects().first().id]
+
+
+def get_rs2_settings():
+    rs2_settings = app_settings.DEFAULT
+    rs2_settings.update(settings.RS2_ACCESS)
+    return Namespace(**rs2_settings)
```

## NEMO_rs2_access/urls.py

```diff
@@ -1,7 +1,11 @@
 from django.urls import path
 
 from NEMO_rs2_access import views
 
 urlpatterns = [
-    path("user_preferences/", views.custom_user_preferences, name="user_preferences")
+    # Override user preferences to add default project selection
+    path("user_preferences/", views.custom_user_preferences, name="user_preferences"),
+
+    path("rs2_sync_readers/", views.rs2_sync_reader, name="rs2_sync_readers"),
+    path("rs2_sync_access/", views.rs2_sync_access, name="rs2_sync_access"),
 ]
```

## NEMO_rs2_access/views.py

```diff
@@ -2,21 +2,22 @@
 from NEMO.forms import UserPreferencesForm
 from NEMO.models import User
 from NEMO.utilities import render_combine_responses
 from NEMO.views.customization import StatusDashboardCustomization
 from NEMO.views.status_dashboard import show_staff_status
 from NEMO.views.users import user_preferences
 from django.contrib import messages
-from django.contrib.auth.decorators import login_required
+from django.contrib.auth.decorators import login_required, permission_required
+from django.http import HttpResponse
 from django.shortcuts import redirect
 from django.utils import timezone
-from django.views.decorators.http import require_http_methods
+from django.views.decorators.http import require_GET, require_http_methods
 
 from NEMO_rs2_access.models import UserPreferencesDefaultProject
-from NEMO_rs2_access.rs2 import logout
+from NEMO_rs2_access.rs2 import logout, sync_access, sync_readers
 
 
 @login_required
 @require_http_methods(["GET", "POST"])
 def custom_user_preferences(request):
     original_response = user_preferences(request)
     user: User = User.objects.get(pk=request.user.id)
@@ -50,7 +51,23 @@
 
 
 # Replace NEMO's logout function by our own, so if someone logs out from the dashboard or calendar,
 # it will proceed with the rs2 flow, figuring out which project to charge etc.
 @replace_function("NEMO.views.area_access.log_out_user")
 def new_logout(old_function, user: User):
     logout(user, timezone.now())
+
+
+@login_required
+@require_GET
+@permission_required("NEMO.trigger_timed_services", raise_exception=True)
+def rs2_sync_reader(request):
+    sync_readers()
+    return HttpResponse()
+
+
+@login_required
+@require_GET
+@permission_required("NEMO.trigger_timed_services", raise_exception=True)
+def rs2_sync_access(request):
+    sync_access()
+    return HttpResponse()
```

## NEMO_rs2_access/tests/test_rs2.py

```diff
@@ -5,61 +5,70 @@
 from NEMO.models import Account, Area, AreaAccessRecord, Project, Tool, UsageEvent, User
 from django.conf import settings
 from django.test import TestCase
 from django.utils import timezone
 from requests import Response
 
 from NEMO_rs2_access.models import Reader, UserPreferencesDefaultProject
-from NEMO_rs2_access.rs2 import READERS_HISTORY_URL, get_project_ids_to_charge_for_user, login, sync_access
+from NEMO_rs2_access.rs2 import (
+    READERS_HISTORY_URL,
+    get_project_ids_to_charge_for_user,
+    get_rs2_settings,
+    login,
+    sync_access,
+)
 
 READER_ONE_ID = "123-456-789"
 READER_TWO_ID = "456-789-101"
 
 BADGE_NUMBER = "123"
 
 
 # This method will be used by the mock to replace requests.get
 # In the web relay case, it will return a xml file with the relay statuses
 def mocked_requests_get(*args, **kwargs):
+    rs2_settings = get_rs2_settings()
+
     class MockResponse(Response):
         def __init__(self, json_data, status_code):
             super().__init__()
             self.json_data = json_data
             self.status_code = status_code
 
         def json(self):
             return self.json_data
 
     reader_id = settings.RS2_READER_ID
-    if args[0].startswith(settings.RS2_ACCESS["url"] + READERS_HISTORY_URL.format(reader_id, "")):
+    if args[0].startswith(rs2_settings.url + READERS_HISTORY_URL.format(reader_id, "")):
         badge = settings.RS2_BADGE_NUMBER
         return MockResponse(mock_event_access_granted(badge, reader_id), 200)
-    elif args[0].startswith(settings.RS2_ACCESS["url"]):
+    elif args[0].startswith(rs2_settings.url):
         return MockResponse([], 200)
 
     return MockResponse(None, 404)
 
 
 def mock_event_access_granted(badge_number, reader_id) -> List[Dict]:
+    rs2_settings = get_rs2_settings()
     event = {
         "SiteId": "123123123123123",
         "SiteName": "Site 1",
         "EventDate": "2023-05-15T14:09:46",
         "SourceType": 6,
         "SourceId": reader_id,
         "EventType": 601,
         "Description": "Access Granted",
         "EventLocation": "Cleanroom entrance",
         "EventLocationId": None,
         "Cardholder": "Testy McTester",
         "CardNumber": None,
         "FacilityCode": 507,
-        "CardholderId": None,
+        "CardholderId": 123456,
         "CardId": None,
-        settings.RS2_BADGE_NUMBER_SYNC_FIELD: badge_number,
+        rs2_settings.user_sync_field: badge_number,
     }
     return [event]
 
 
 class RS2Test(TestCase):
     def test_get_correct_project(self):
         account: Account = Account.objects.create(name="Test account")
```

## Comparing `NEMO_rs2_access-1.0.1.dist-info/LICENSE` & `NEMO_rs2_access-1.1.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `NEMO_rs2_access-1.0.1.dist-info/METADATA` & `NEMO_rs2_access-1.1.0.dist-info/METADATA`

 * *Files 10% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: NEMO-rs2-access
-Version: 1.0.1
+Version: 1.1.0
 Summary: Install RS2 access plugin for NEMO
 Home-page: https://gitlab.com/nemo-community/atlantis-labs/nemo-rs2-access
 Author: Atlantis Labs LLC
 Author-email: atlantis@atlantislabs.io
 License: MIT
 Keywords: NEMO
 Classifier: Development Status :: 5 - Production/Stable
@@ -42,18 +42,23 @@
   "url": "",
   "timeout": 30, # timeout in seconds
   "public_key": "",
   "auth": {
     "user_id": "",
     "password": ""
   }
+   # Uncomment to change the default CardHolder sync field 
+   # Choices are "CardholderId", "CardNumber", "CardId", or cardholder attribute like "UserColumns.UserText1"
+   # "user_sync_field": "CardNumber",
+   # Uncomment to use the sync field as an attribute of Cardholder (default is False, meaning it is an attribute of the Event)
+   # "cardholder_sync": False,
+   # Uncomment to change the default NEMO sync field, for example `details__employee_id`
+   # "nemo_user_sync_field": "badge_number",
 }
-# Uncomment to change the default sync field 
-# Choices are "CardholderId", "CardNumber", "CardId"
-# RS2_BADGE_NUMBER_SYNC_FIELD = "CardNumber"
+
 ```
 4. enable and start systemd tasks (examples in this [systemd folder](https://gitlab.com/nemo-community/atlantis-labs/nemo-rs2-access/-/tree/main/resources/systemd)):
    * nemo_rs2_sync_readers (every hour or every day)
    * nemo_rs2_sync_access (every minute)
 
 Notes:
 1. in Detailed administration -> Customization, a customization with key `rs2_event_begin_date` and date value for example `2023-05-18T19:30:16` can be set prior to the first run to grab data starting at that date.
```

## Comparing `NEMO_rs2_access-1.0.1.dist-info/RECORD` & `NEMO_rs2_access-1.1.0.dist-info/RECORD`

 * *Files 15% similar despite different names*

```diff
@@ -1,23 +1,24 @@
 NEMO_rs2_access/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-NEMO_rs2_access/admin.py,sha256=PySsmcvRCeBxoK544hn6o9p4YWgWlqYRNdGmd1uchms,1878
-NEMO_rs2_access/app_settings.py,sha256=TBWmltWGXmTQUWy0DYZT9Fp2wVLg9xzpqUv7CbeQOOc,59
+NEMO_rs2_access/admin.py,sha256=mHmOUjIQJRs5RLoyHad5MfYJhB9O5KXf81AGhaK6y9s,2113
+NEMO_rs2_access/app_settings.py,sha256=eEEA-t7lbRdr3EP7T-nKsQwCrsHkQSjr_THFDH-3TFg,229
 NEMO_rs2_access/apps.py,sha256=9pLKmq42SEuj2_moEluzinN6q-aJukrqpFEWhoboOqA,543
-NEMO_rs2_access/models.py,sha256=P-oOGR50ZSz_fYCfxdUhi7pbe3mXc6FfAa-HW2cPuMo,1277
-NEMO_rs2_access/rs2.py,sha256=dnJg5ti51_jhI23kTEgixZZHSegZ9rVvstFKeo5yUbU,9767
-NEMO_rs2_access/urls.py,sha256=EL1nyzcvpc_H6VyL_WL4QV4bdTfiV2i1cOgA1oTA-c0,169
-NEMO_rs2_access/views.py,sha256=5Fy5WKh4tIk0OWkfESLaEJM9_CA2Eg662WYSEZ6WpeI,2675
+NEMO_rs2_access/models.py,sha256=hR_YHowp1bvTE4Q-6lQ1cfSQnGpbFJqc88K-CZMU0Mo,1719
+NEMO_rs2_access/rs2.py,sha256=aHOV6Hf6o5MYKCSY6n3kw_L3Q-vU6oULzlmhvye_BSA,12092
+NEMO_rs2_access/urls.py,sha256=COtyhTblZXpHsgrW5ZaAMVBZ9MpS1ldPZAJ5jk6fYwQ,392
+NEMO_rs2_access/views.py,sha256=2fnUw7oK_t-FwZmNZU9yOtl3fQ3kudJ8MRS1Ya-hu-E,3132
 NEMO_rs2_access/management/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 NEMO_rs2_access/management/commands/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 NEMO_rs2_access/management/commands/rs2_sync_access.py,sha256=cZWLdWSh4Nc4qswNMgU51Kab20gR6jYMFyza1FyuUWE,240
 NEMO_rs2_access/management/commands/rs2_sync_readers.py,sha256=usjV-T6wIh1NFUwWAZ9pyTyJR-JL4xgQ1m5kb-s-1Fw,229
 NEMO_rs2_access/migrations/0001_initial.py,sha256=hSE8y7fAy2hZhFMkwdpjHa1Sx_47kU_L2z4GP0Zh06M,1830
+NEMO_rs2_access/migrations/0002_cardholder.py,sha256=cYGJCYGMTeYwCLcSGPoE6tWGkjiZ-rrhvb2To4wDrkU,902
 NEMO_rs2_access/migrations/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 NEMO_rs2_access/templates/NEMO_rs2_access/preferences_default_project.html,sha256=OmBSudrwif-lvUn96Sx7y2uc0x0UQjhl0SKl05cs4fw,1316
 NEMO_rs2_access/tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-NEMO_rs2_access/tests/test_rs2.py,sha256=QTs0sNyzI3iKX6S37I1j_Ynwd0mVLe2t-HjC7JUFrQY,9353
+NEMO_rs2_access/tests/test_rs2.py,sha256=gO9CNjpljBoCLVaS6sj4YUn3lWHaqnFHKCXtEQW0caw,9447
 NEMO_rs2_access/tests/test_settings.py,sha256=BabdWjKY-o4eyDDSnnFual1byLC5E7uaT2v5TUiAXjk,5224
-NEMO_rs2_access-1.0.1.dist-info/LICENSE,sha256=wFCCmLGvBMU6-W_0h08WYEs3cFtVstutDmY5AzKppQc,1074
-NEMO_rs2_access-1.0.1.dist-info/METADATA,sha256=cfmgTN7xcfSMlJGqgPM3Hhhg2tAikcfmtv1LNLmsfK8,2853
-NEMO_rs2_access-1.0.1.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-NEMO_rs2_access-1.0.1.dist-info/top_level.txt,sha256=lxDQ4qhvDJJoXKvfdHMqoreAITCgFgUuVsUHi32kwBc,16
-NEMO_rs2_access-1.0.1.dist-info/RECORD,,
+NEMO_rs2_access-1.1.0.dist-info/LICENSE,sha256=wFCCmLGvBMU6-W_0h08WYEs3cFtVstutDmY5AzKppQc,1074
+NEMO_rs2_access-1.1.0.dist-info/METADATA,sha256=_brxEZtATa13OH8rmqWDyEdcqGBoOoFLHSf93lb8O4o,3210
+NEMO_rs2_access-1.1.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+NEMO_rs2_access-1.1.0.dist-info/top_level.txt,sha256=lxDQ4qhvDJJoXKvfdHMqoreAITCgFgUuVsUHi32kwBc,16
+NEMO_rs2_access-1.1.0.dist-info/RECORD,,
```

