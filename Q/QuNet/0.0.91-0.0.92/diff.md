# Comparing `tmp/QuNet-0.0.91-py3-none-any.whl.zip` & `tmp/QuNet-0.0.92-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,30 +1,30 @@
-Zip file size: 67306 bytes, number of entries: 28
+Zip file size: 67438 bytes, number of entries: 28
 -rw-rw-rw-  2.0 fat      519 b- defN 23-Jun-12 07:32 qunet/__init__.py
 -rw-rw-rw-  2.0 fat      616 b- defN 23-Apr-27 07:47 qunet/batch.py
 -rw-rw-rw-  2.0 fat     5703 b- defN 23-May-05 12:11 qunet/callback.py
 -rw-rw-rw-  2.0 fat     8843 b- defN 23-May-25 11:08 qunet/data.py
 -rw-rw-rw-  2.0 fat     2955 b- defN 23-May-28 11:12 qunet/losses.py
--rw-rw-rw-  2.0 fat    23466 b- defN 23-Jun-17 14:43 qunet/modelstate.py
+-rw-rw-rw-  2.0 fat    23518 b- defN 23-Jun-21 08:44 qunet/modelstate.py
 -rw-rw-rw-  2.0 fat    16977 b- defN 23-Apr-20 12:40 qunet/old.py
--rw-rw-rw-  2.0 fat    10548 b- defN 23-Jun-20 09:41 qunet/plots.py
--rw-rw-rw-  2.0 fat    52134 b- defN 23-Jun-20 09:36 qunet/trainer.py
+-rw-rw-rw-  2.0 fat    10560 b- defN 23-Jun-21 12:04 qunet/plots.py
+-rw-rw-rw-  2.0 fat    52803 b- defN 23-Jun-21 12:10 qunet/trainer.py
 -rw-rw-rw-  2.0 fat     6545 b- defN 23-Jun-06 08:41 qunet/utils.py
 -rw-rw-rw-  2.0 fat        3 b- defN 23-Apr-26 10:17 qunet/modules/__init__.py
 -rw-rw-rw-  2.0 fat    25379 b- defN 23-Jun-11 13:06 qunet/modules/cnn.py
 -rw-rw-rw-  2.0 fat     7964 b- defN 23-May-20 06:54 qunet/modules/cnn3D.py
 -rw-rw-rw-  2.0 fat     6302 b- defN 23-Apr-27 12:45 qunet/modules/gnn.py
 -rw-rw-rw-  2.0 fat     4470 b- defN 23-May-20 06:52 qunet/modules/mlp.py
 -rw-rw-rw-  2.0 fat     2897 b- defN 23-Apr-28 13:35 qunet/modules/points.py
 -rw-rw-rw-  2.0 fat     1594 b- defN 23-Jun-13 17:44 qunet/modules/total.py
 -rw-rw-rw-  2.0 fat    20312 b- defN 23-May-12 12:52 qunet/modules/transformer.py
 -rw-rw-rw-  2.0 fat        3 b- defN 23-Apr-26 10:17 qunet/optim/__init__.py
 -rw-rw-rw-  2.0 fat     8517 b- defN 23-Jun-07 15:24 qunet/optim/adams.py
 -rw-rw-rw-  2.0 fat    14092 b- defN 23-Apr-25 10:33 qunet/optim/scheduler.py
 -rw-rw-rw-  2.0 fat        3 b- defN 23-Apr-26 10:17 qunet/rl/__init__.py
 -rw-rw-rw-  2.0 fat    15969 b- defN 23-Jun-05 12:31 qunet/rl/dqn.py
--rw-rw-rw-  2.0 fat     1068 b- defN 23-Jun-20 10:49 QuNet-0.0.91.dist-info/LICENSE
--rw-rw-rw-  2.0 fat    16131 b- defN 23-Jun-20 10:49 QuNet-0.0.91.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-Jun-20 10:49 QuNet-0.0.91.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        6 b- defN 23-Jun-20 10:49 QuNet-0.0.91.dist-info/top_level.txt
-?rw-rw-r--  2.0 fat     2122 b- defN 23-Jun-20 10:49 QuNet-0.0.91.dist-info/RECORD
-28 files, 255230 bytes uncompressed, 63982 bytes compressed:  74.9%
+-rw-rw-rw-  2.0 fat     1068 b- defN 23-Jun-21 12:13 QuNet-0.0.92.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat    16131 b- defN 23-Jun-21 12:13 QuNet-0.0.92.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-Jun-21 12:13 QuNet-0.0.92.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        6 b- defN 23-Jun-21 12:13 QuNet-0.0.92.dist-info/top_level.txt
+?rw-rw-r--  2.0 fat     2122 b- defN 23-Jun-21 12:13 QuNet-0.0.92.dist-info/RECORD
+28 files, 255963 bytes uncompressed, 64114 bytes compressed:  75.0%
```

## zipnote {}

```diff
@@ -63,23 +63,23 @@
 
 Filename: qunet/rl/__init__.py
 Comment: 
 
 Filename: qunet/rl/dqn.py
 Comment: 
 
-Filename: QuNet-0.0.91.dist-info/LICENSE
+Filename: QuNet-0.0.92.dist-info/LICENSE
 Comment: 
 
-Filename: QuNet-0.0.91.dist-info/METADATA
+Filename: QuNet-0.0.92.dist-info/METADATA
 Comment: 
 
-Filename: QuNet-0.0.91.dist-info/WHEEL
+Filename: QuNet-0.0.92.dist-info/WHEEL
 Comment: 
 
-Filename: QuNet-0.0.91.dist-info/top_level.txt
+Filename: QuNet-0.0.92.dist-info/top_level.txt
 Comment: 
 
-Filename: QuNet-0.0.91.dist-info/RECORD
+Filename: QuNet-0.0.92.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## qunet/modelstate.py

```diff
@@ -453,16 +453,16 @@
 
         plt.show()
 
     #---------------------------------------------------------------------------
 
     @staticmethod
     def plot_params(params, titles=None, sorted=1, grad=True, w=12, h=3):
-        if type(params) not in [list, tuple]:
-            params = [params]
+        if type(params) not in [list, tuple]: params = [params]
+        if type(titles) is str:               titles = [titles]
         fig, axs = plt.subplots(1,len(params), figsize=(w, h))
         for i, p in enumerate(params):
             ax = axs[i] if len(params) > 1 else axs
             if p.dim()==1 or (p.dim()==2 and (p.shape[0]==1 or p.shape[-1]==1)):
                 if titles is not None and type(titles) in [list, tuple] and len(titles) > i:
                     ax.set_title(titles[i])
                 ax.grid(ls=":")
```

## qunet/plots.py

```diff
@@ -175,23 +175,24 @@
     else:
         if alpha > 0:
             ax.plot(x, y, color, linewidth=lw, alpha=alpha)
         pool = nn.AvgPool1d(kern, stride=stride, padding=kern // 2, count_include_pad=False)
         avg_y = pool(torch.Tensor(y).view(1,-1)).flatten().numpy()
         avg_x = pool(torch.Tensor(x).view(1,-1)).flatten().numpy()
         
+        """
         sx, sxx = avg_x[-num:].sum(), (avg_x[-num:]*avg_x[-num:]).sum()
         sy, sxy = avg_y[-num:].sum(), (avg_x[-num:]*avg_y[-num:]).sum()
         d = num*sxx - sx*sx
         if d > 0:
             b = (num*sxy - sx*sy) / d                                 # экстраполируем вперёд
             a = (sy - b*sx) / num                                     # даже при stride=1 график отстаёт                  
             avg_x = np.append(avg_x, [ x[-1] ])                       # из-за усреднения x            
             avg_y = np.append(avg_y, [a + b*x[-1]])
-                
+        """     
         ax.plot(avg_x, avg_y, color, linewidth=width, label=label)    
         
 
 
 #===============================================================================
 #                                   Main
 #===============================================================================
```

## qunet/trainer.py

```diff
@@ -793,24 +793,33 @@
         plot_history(hist, view, fname)
 
     #---------------------------------------------------------------------------
 
     def stat(self, newline=True):
         if newline:
             print()
-        if self.hist.val.best.score is not None:
-            print(f"validation score={self.hist.val.best.score:.6f}, loss={self.hist.val.best.loss:.6f};  epochs={self.epoch}, samples={self.hist.samples}, steps={self.hist.steps}")
+        
+        if self.data.val is not None:                 # есть валидационные данные
+            if self.hist.val.best.score is not None:  # есть score
+                print(f"val: score={self.hist.val.best.score:.6f}[{self.hist.val.best.score_epochs or ' '}], loss={self.hist.val.best.loss:.6f}[{self.hist.val.best.loss_epochs or ' '}];")            
+            else:                                     # только loss
+                print(f"val: loss={self.hist.val.best.loss:.6f}[{self.hist.val.best.loss_epochs or ' '}]") 
+
             if self.hist.val.best.score_ema is not None:
-                print(f"ema score={self.hist.val.best.score_ema or 0.0:.6f}, loss={self.hist.val.best.loss_ema or 0.0:.6f}")
-        elif self.hist.trn.best.score is not None:
-            print(f"validation loss={self.hist.val.best.loss:.6f};  epochs={self.epoch}, samples={self.hist.samples}, steps={self.hist.steps}")
+                print(f"ema: score={self.hist.val.best.score_ema or 0.0:.6f}, loss={self.hist.val.best.loss_ema or 0.0:.6f}")
+
+        if self.hist.trn.best.score is not None:     # есть score
+            print(f"trn: score={self.hist.trn.best.score:.6f}[{self.hist.trn.best.score_epochs or ' '}], loss={self.hist.trn.best.loss:.6f}[{self.hist.trn.best.loss_epochs or ' '}]")
+        else:                                        # только loss
+            print(f"trn: loss={self.hist.trn.best.loss:.6f}[{self.hist.trn.best.loss_epochs or ' '}]")
 
+        print(f"epochs={self.epoch}, samples={self.hist.samples}, steps={self.hist.steps}")
         t_steps = f"{self.hist.time.trn*1_000/self.hist.steps:.2f}"   if self.hist.steps > 0 else "???"
         t_sampl = f"{self.hist.time.trn*1_000_000/self.hist.samples:.2f}" if self.hist.samples > 0 else "???"
-        t_epoch = f"{self.hist.time.trn/self.epoch:.2f}" if self.epoch > 0 else "???"
+        t_epoch = f"{self.hist.time.trn/self.epoch:.2f}" if self.epoch > 0 else "???"    
         print(f"times=(trn:{self.hist.time.trn/60:.2f}, val:{self.hist.time.val/60:.2f})m,  {t_epoch} s/epoch, {t_steps} s/10^3 steps,  {t_sampl} s/10^6 samples")
 
     #---------------------------------------------------------------------------
 
     def best_score(self, best, score):
         return score is not None  and len(score) \
                 and (best is None \
```

## Comparing `QuNet-0.0.91.dist-info/LICENSE` & `QuNet-0.0.92.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `QuNet-0.0.91.dist-info/METADATA` & `QuNet-0.0.92.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: QuNet
-Version: 0.0.91
+Version: 0.0.92
 Summary: Working with deep learning models
 Home-page: https://github.com/step137/qunet
 Author: synset
 Author-email: steps137ai@gmail.com
 License: UNKNOWN
 Platform: UNKNOWN
 Classifier: Programming Language :: Python :: 3
```

## Comparing `QuNet-0.0.91.dist-info/RECORD` & `QuNet-0.0.92.dist-info/RECORD`

 * *Files 5% similar despite different names*

```diff
@@ -1,28 +1,28 @@
 qunet/__init__.py,sha256=NSnUKrhrcHjtYOtYjqQE0qxv6NbhpRwUe2uQNlj6K9w,519
 qunet/batch.py,sha256=bBlUctBato37BkDMo69dH1icFvsCpOxH94ScYjKkwfc,616
 qunet/callback.py,sha256=Jic-Ehcg1uxRLX1Qr9H55gAfdIuX2ZdeNbGZEVw9Aq8,5703
 qunet/data.py,sha256=2oOEhaPyqXyuQd_KhaA8ZER_9c3AFzSaZnVG4JqFMAQ,8843
 qunet/losses.py,sha256=-euuc242iM5I8CXZgXTiG7R_hTOea0qUhlNug0D3Ijg,2955
-qunet/modelstate.py,sha256=mR5SY96mkhcGQDBLrvGOZNw_yesS46J0kKCSFbM-dog,23466
+qunet/modelstate.py,sha256=vaZIJzanCrWCAdQBGLF4RWYGQW9PV-tL06P-rSdKBy0,23518
 qunet/old.py,sha256=wfsu9d4vcptlBT1lgPKHCfqDm8lirDvTTvEEzKGjTig,16977
-qunet/plots.py,sha256=lE4apTEOzgVTr29QqTkmKXI0lHbJZqKQcU_Vwge-OGE,10548
-qunet/trainer.py,sha256=X2udWt2gy3B1R4zh6nZpjYndtmIIMfkbGcOSDzBMRVc,52134
+qunet/plots.py,sha256=IBS-Iak1O399igi0qmfSdp4rTPfaFzHEmYi_xsw5EJw,10560
+qunet/trainer.py,sha256=89idHMmoIaRO8MPyGb97avKL5MFNlf0Hbluo255Rhjo,52803
 qunet/utils.py,sha256=85GOgOkATjgrditptjfBpVK174o5hLO-M7lyNm90lWA,6545
 qunet/modules/__init__.py,sha256=8ZRc1sGeVrPBx4lD717BgRaQekyh78QKV9SKsdt638U,3
 qunet/modules/cnn.py,sha256=GZctxAYDjeuWlg0U54LOl1p4qoVoAWOacqAfySxQqxg,25379
 qunet/modules/cnn3D.py,sha256=Q_htR1sNQccF6BbEjU8QPgJkuTnA910Fa-VfqaTGPgU,7964
 qunet/modules/gnn.py,sha256=FY3rc4hL6HtMYh_Yn9tGYNZqqvBn-Qdwx0O_HJcbuzk,6302
 qunet/modules/mlp.py,sha256=weqNleOfQWuOBXvORLmmVnsL-hG2aE6e3aXgFjG08EI,4470
 qunet/modules/points.py,sha256=3XxfdSdOMgGte4NJWO9Lf_4zXIIHiPpCUBbsoAsVONg,2897
 qunet/modules/total.py,sha256=wjjrX4g5gxkH0GSRsyYAMtTjr9KqRKi2zdO-T07Tvxo,1594
 qunet/modules/transformer.py,sha256=Q48tMEiDYR94h1CwRVwCp2p36rTMPu3UMvlCoYFjSDs,20312
 qunet/optim/__init__.py,sha256=8ZRc1sGeVrPBx4lD717BgRaQekyh78QKV9SKsdt638U,3
 qunet/optim/adams.py,sha256=UbaKMSaK3HHjuZKuyPxfLw2m2yrR8mD6CS3BKmCQ3K0,8517
 qunet/optim/scheduler.py,sha256=tAAgUS0LaAOPxVqxDsYAitF3ExX7Pt_dNK4XwzbTYdY,14092
 qunet/rl/__init__.py,sha256=8ZRc1sGeVrPBx4lD717BgRaQekyh78QKV9SKsdt638U,3
 qunet/rl/dqn.py,sha256=Ex18lo17luQuRUhaqaeLhO_IrT_s6ObJexiznSgxoSY,15969
-QuNet-0.0.91.dist-info/LICENSE,sha256=TSOuIu1obl3tk6okEX3AbHzQjUhXvTKU3gY_yDhpZM0,1068
-QuNet-0.0.91.dist-info/METADATA,sha256=jovwJQJv7JJd7gvQ62KPuYph6JhzMi5NIEHxSuvxNao,16131
-QuNet-0.0.91.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-QuNet-0.0.91.dist-info/top_level.txt,sha256=fZTlCNIA7T6KO6-qMX35d8uK01uhYTGRKO117oubma8,6
-QuNet-0.0.91.dist-info/RECORD,,
+QuNet-0.0.92.dist-info/LICENSE,sha256=TSOuIu1obl3tk6okEX3AbHzQjUhXvTKU3gY_yDhpZM0,1068
+QuNet-0.0.92.dist-info/METADATA,sha256=gocUnHS_3YBRbThKwVDLsgiFvNW4W4imUBQIVctP5gU,16131
+QuNet-0.0.92.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+QuNet-0.0.92.dist-info/top_level.txt,sha256=fZTlCNIA7T6KO6-qMX35d8uK01uhYTGRKO117oubma8,6
+QuNet-0.0.92.dist-info/RECORD,,
```

